"use strict";(()=>{var e={};e.id=273,e.ids=[273],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},7702:e=>{e.exports=require("events")},2048:e=>{e.exports=require("fs")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},8216:e=>{e.exports=require("net")},9801:e=>{e.exports=require("os")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},2452:e=>{e.exports=require("tls")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},6975:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var a={};r.r(a),r.d(a,{GET:()=>p});var s=r(9303),i=r(8716),o=r(670),u=r(7070),n=r(8555);async function p(e,{params:t}){try{let e=parseInt(t.id);if(isNaN(e))return u.NextResponse.json({success:!1,error:"Ge\xe7ersiz irsaliye ID"},{status:400});let r=await (0,n.v$)(e);if(!r)return u.NextResponse.json({success:!1,error:"İrsaliye bulunamadı"},{status:404});let a=await (0,n.Kv)(e);if(!a){let e=r.total_amount||0;if(0===e)return u.NextResponse.json({success:!1,error:"Hesaplama sonucu bulunamadı ve toplam tutar bilgisi yok"},{status:404});let t=e/1.18;return u.NextResponse.json({success:!0,data:{calculatedPrice:e,invoiceType:"SATIS_FATURASI",breakdown:{baseAmount:t,taxAmount:.18*t,discountAmount:0},calculation:{method:"Mevcut Toplam Tutar",details:"Hesaplama kaydı bulunamadı, mevcut toplam tutar kullanıldı"}}})}return u.NextResponse.json({success:!0,data:{calculatedPrice:a.calculated_price,invoiceType:a.invoice_type,breakdown:{baseAmount:a.base_amount,taxAmount:a.tax_amount,discountAmount:a.discount_amount},calculation:{method:a.calculation_method||"",details:a.calculation_details||""}}})}catch(e){return console.error("[api/shipping/[id]/latest-calculation] Hata:",e),u.NextResponse.json({success:!1,error:"Hesaplama sonucu alınırken bir hata oluştu"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/shipping/[id]/latest-calculation/route",pathname:"/api/shipping/[id]/latest-calculation",filename:"route",bundlePath:"app/api/shipping/[id]/latest-calculation/route"},resolvedPagePath:"C:\\Users\\caner.karadag\\Cursor_Projeler\\Tedarikci_Irsaliye\\app\\app\\api\\shipping\\[id]\\latest-calculation\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:m}=l,x="/api/shipping/[id]/latest-calculation/route";function h(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,64,555],()=>r(6975));module.exports=a})();