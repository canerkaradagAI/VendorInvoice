"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/shipping/[id]/latest-calculation/route";
exports.ids = ["app/api/shipping/[id]/latest-calculation/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute&page=%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute.ts&appDir=C%3A%5CUsers%5Ccaner.karadag%5CCursor_Projeler%5CTedarikci_Irsaliye%5Capp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccaner.karadag%5CCursor_Projeler%5CTedarikci_Irsaliye%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute&page=%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute.ts&appDir=C%3A%5CUsers%5Ccaner.karadag%5CCursor_Projeler%5CTedarikci_Irsaliye%5Capp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccaner.karadag%5CCursor_Projeler%5CTedarikci_Irsaliye%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_caner_karadag_Cursor_Projeler_Tedarikci_Irsaliye_app_app_api_shipping_id_latest_calculation_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/shipping/[id]/latest-calculation/route.ts */ \"(rsc)/./app/api/shipping/[id]/latest-calculation/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/shipping/[id]/latest-calculation/route\",\n        pathname: \"/api/shipping/[id]/latest-calculation\",\n        filename: \"route\",\n        bundlePath: \"app/api/shipping/[id]/latest-calculation/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\caner.karadag\\\\Cursor_Projeler\\\\Tedarikci_Irsaliye\\\\app\\\\app\\\\api\\\\shipping\\\\[id]\\\\latest-calculation\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_caner_karadag_Cursor_Projeler_Tedarikci_Irsaliye_app_app_api_shipping_id_latest_calculation_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/shipping/[id]/latest-calculation/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzaGlwcGluZyUyRiU1QmlkJTVEJTJGbGF0ZXN0LWNhbGN1bGF0aW9uJTJGcm91dGUmcGFnZT0lMkZhcGklMkZzaGlwcGluZyUyRiU1QmlkJTVEJTJGbGF0ZXN0LWNhbGN1bGF0aW9uJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGc2hpcHBpbmclMkYlNUJpZCU1RCUyRmxhdGVzdC1jYWxjdWxhdGlvbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNjYW5lci5rYXJhZGFnJTVDQ3Vyc29yX1Byb2plbGVyJTVDVGVkYXJpa2NpX0lyc2FsaXllJTVDYXBwJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNjYW5lci5rYXJhZGFnJTVDQ3Vyc29yX1Byb2plbGVyJTVDVGVkYXJpa2NpX0lyc2FsaXllJTVDYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMwRTtBQUN2SjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3RlZGFyaWtjaS1pcnNhbGl5ZS8/NTRmMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxjYW5lci5rYXJhZGFnXFxcXEN1cnNvcl9Qcm9qZWxlclxcXFxUZWRhcmlrY2lfSXJzYWxpeWVcXFxcYXBwXFxcXGFwcFxcXFxhcGlcXFxcc2hpcHBpbmdcXFxcW2lkXVxcXFxsYXRlc3QtY2FsY3VsYXRpb25cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NoaXBwaW5nL1tpZF0vbGF0ZXN0LWNhbGN1bGF0aW9uL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2hpcHBpbmcvW2lkXS9sYXRlc3QtY2FsY3VsYXRpb25cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3NoaXBwaW5nL1tpZF0vbGF0ZXN0LWNhbGN1bGF0aW9uL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcY2FuZXIua2FyYWRhZ1xcXFxDdXJzb3JfUHJvamVsZXJcXFxcVGVkYXJpa2NpX0lyc2FsaXllXFxcXGFwcFxcXFxhcHBcXFxcYXBpXFxcXHNoaXBwaW5nXFxcXFtpZF1cXFxcbGF0ZXN0LWNhbGN1bGF0aW9uXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zaGlwcGluZy9baWRdL2xhdGVzdC1jYWxjdWxhdGlvbi9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute&page=%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute.ts&appDir=C%3A%5CUsers%5Ccaner.karadag%5CCursor_Projeler%5CTedarikci_Irsaliye%5Capp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccaner.karadag%5CCursor_Projeler%5CTedarikci_Irsaliye%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/shipping/[id]/latest-calculation/route.ts":
/*!***********************************************************!*\
  !*** ./app/api/shipping/[id]/latest-calculation/route.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../lib/database */ \"(rsc)/./app/lib/database.ts\");\n\n\nasync function GET(request, { params }) {\n    try {\n        const shippingId = parseInt(params.id);\n        if (isNaN(shippingId)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Ge\\xe7ersiz irsaliye ID\"\n            }, {\n                status: 400\n            });\n        }\n        // İrsaliye bilgisini kontrol et\n        const shippingDoc = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getShippingDocumentById)(shippingId);\n        if (!shippingDoc) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"İrsaliye bulunamadı\"\n            }, {\n                status: 404\n            });\n        }\n        // En son hesaplama sonucunu al\n        let calculation = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.getLatestPriceCalculation)(shippingId);\n        // Eğer hesaplama sonucu yoksa, shipping document'ın total_amount'ını kullan\n        if (!calculation) {\n            // Shipping document'dan total_amount'ı al ve varsayılan değerlerle hesaplama sonucu oluştur\n            const totalAmount = shippingDoc.total_amount || 0;\n            if (totalAmount === 0) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Hesaplama sonucu bulunamadı ve toplam tutar bilgisi yok\"\n                }, {\n                    status: 404\n                });\n            }\n            // KDV hariç tutarı hesapla (KDV %18)\n            const baseAmount = totalAmount / 1.18;\n            const taxAmount = baseAmount * 0.18;\n            const discountAmount = 0;\n            // Varsayılan olarak SATIS_FATURASI tipini kullan\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: {\n                    calculatedPrice: totalAmount,\n                    invoiceType: \"SATIS_FATURASI\",\n                    breakdown: {\n                        baseAmount: baseAmount,\n                        taxAmount: taxAmount,\n                        discountAmount: discountAmount\n                    },\n                    calculation: {\n                        method: \"Mevcut Toplam Tutar\",\n                        details: \"Hesaplama kaydı bulunamadı, mevcut toplam tutar kullanıldı\"\n                    }\n                }\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                calculatedPrice: calculation.calculated_price,\n                invoiceType: calculation.invoice_type,\n                breakdown: {\n                    baseAmount: calculation.base_amount,\n                    taxAmount: calculation.tax_amount,\n                    discountAmount: calculation.discount_amount\n                },\n                calculation: {\n                    method: calculation.calculation_method || \"\",\n                    details: calculation.calculation_details || \"\"\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"[api/shipping/[id]/latest-calculation] Hata:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Hesaplama sonucu alınırken bir hata oluştu\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3NoaXBwaW5nL1tpZF0vbGF0ZXN0LWNhbGN1bGF0aW9uL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0RDtBQUNpQztBQUV0RixlQUFlRyxJQUNwQkMsT0FBb0IsRUFDcEIsRUFBRUMsTUFBTSxFQUE4QjtJQUV0QyxJQUFJO1FBQ0YsTUFBTUMsYUFBYUMsU0FBU0YsT0FBT0csRUFBRTtRQUVyQyxJQUFJQyxNQUFNSCxhQUFhO1lBQ3JCLE9BQU9OLHFEQUFZQSxDQUFDVSxJQUFJLENBQ3RCO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPO1lBQXVCLEdBQ2hEO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxnQ0FBZ0M7UUFDaEMsTUFBTUMsY0FBYyxNQUFNWixzRUFBdUJBLENBQUNJO1FBQ2xELElBQUksQ0FBQ1EsYUFBYTtZQUNoQixPQUFPZCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtnQkFBRUMsU0FBUztnQkFBT0MsT0FBTztZQUFzQixHQUMvQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsK0JBQStCO1FBQy9CLElBQUlFLGNBQWMsTUFBTWQsd0VBQXlCQSxDQUFDSztRQUVsRCw0RUFBNEU7UUFDNUUsSUFBSSxDQUFDUyxhQUFhO1lBQ2hCLDRGQUE0RjtZQUM1RixNQUFNQyxjQUFjRixZQUFZRyxZQUFZLElBQUk7WUFFaEQsSUFBSUQsZ0JBQWdCLEdBQUc7Z0JBQ3JCLE9BQU9oQixxREFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtvQkFBRUMsU0FBUztvQkFBT0MsT0FBTztnQkFBMEQsR0FDbkY7b0JBQUVDLFFBQVE7Z0JBQUk7WUFFbEI7WUFFQSxxQ0FBcUM7WUFDckMsTUFBTUssYUFBYUYsY0FBYztZQUNqQyxNQUFNRyxZQUFZRCxhQUFhO1lBQy9CLE1BQU1FLGlCQUFpQjtZQUV2QixpREFBaUQ7WUFDakQsT0FBT3BCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQ3ZCQyxTQUFTO2dCQUNUVSxNQUFNO29CQUNKQyxpQkFBaUJOO29CQUNqQk8sYUFBYTtvQkFDYkMsV0FBVzt3QkFDVE4sWUFBWUE7d0JBQ1pDLFdBQVdBO3dCQUNYQyxnQkFBZ0JBO29CQUNsQjtvQkFDQUwsYUFBYTt3QkFDWFUsUUFBUTt3QkFDUkMsU0FBUztvQkFDWDtnQkFDRjtZQUNGO1FBQ0Y7UUFFQSxPQUFPMUIscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUVSxNQUFNO2dCQUNKQyxpQkFBaUJQLFlBQVlZLGdCQUFnQjtnQkFDN0NKLGFBQWFSLFlBQVlhLFlBQVk7Z0JBQ3JDSixXQUFXO29CQUNUTixZQUFZSCxZQUFZYyxXQUFXO29CQUNuQ1YsV0FBV0osWUFBWWUsVUFBVTtvQkFDakNWLGdCQUFnQkwsWUFBWWdCLGVBQWU7Z0JBQzdDO2dCQUNBaEIsYUFBYTtvQkFDWFUsUUFBUVYsWUFBWWlCLGtCQUFrQixJQUFJO29CQUMxQ04sU0FBU1gsWUFBWWtCLG1CQUFtQixJQUFJO2dCQUM5QztZQUNGO1FBQ0Y7SUFDRixFQUFFLE9BQU9yQixPQUFPO1FBQ2RzQixRQUFRdEIsS0FBSyxDQUFDLGdEQUFnREE7UUFDOUQsT0FBT1oscURBQVlBLENBQUNVLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxPQUFPO1FBQTZDLEdBQ3RFO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVkYXJpa2NpLWlyc2FsaXllLy4vYXBwL2FwaS9zaGlwcGluZy9baWRdL2xhdGVzdC1jYWxjdWxhdGlvbi9yb3V0ZS50cz85OTM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXHJcbmltcG9ydCB7IGdldExhdGVzdFByaWNlQ2FsY3VsYXRpb24sIGdldFNoaXBwaW5nRG9jdW1lbnRCeUlkIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2xpYi9kYXRhYmFzZVwiXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKFxyXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxyXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9XHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBzaGlwcGluZ0lkID0gcGFyc2VJbnQocGFyYW1zLmlkKVxyXG4gICAgXHJcbiAgICBpZiAoaXNOYU4oc2hpcHBpbmdJZCkpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkdlw6dlcnNpeiBpcnNhbGl5ZSBJRFwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyDEsHJzYWxpeWUgYmlsZ2lzaW5pIGtvbnRyb2wgZXRcclxuICAgIGNvbnN0IHNoaXBwaW5nRG9jID0gYXdhaXQgZ2V0U2hpcHBpbmdEb2N1bWVudEJ5SWQoc2hpcHBpbmdJZClcclxuICAgIGlmICghc2hpcHBpbmdEb2MpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIsSwcnNhbGl5ZSBidWx1bmFtYWTEsVwiIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBFbiBzb24gaGVzYXBsYW1hIHNvbnVjdW51IGFsXHJcbiAgICBsZXQgY2FsY3VsYXRpb24gPSBhd2FpdCBnZXRMYXRlc3RQcmljZUNhbGN1bGF0aW9uKHNoaXBwaW5nSWQpXHJcbiAgICBcclxuICAgIC8vIEXEn2VyIGhlc2FwbGFtYSBzb251Y3UgeW9rc2EsIHNoaXBwaW5nIGRvY3VtZW50J8SxbiB0b3RhbF9hbW91bnQnxLFuxLEga3VsbGFuXHJcbiAgICBpZiAoIWNhbGN1bGF0aW9uKSB7XHJcbiAgICAgIC8vIFNoaXBwaW5nIGRvY3VtZW50J2RhbiB0b3RhbF9hbW91bnQnxLEgYWwgdmUgdmFyc2F5xLFsYW4gZGXEn2VybGVybGUgaGVzYXBsYW1hIHNvbnVjdSBvbHXFn3R1clxyXG4gICAgICBjb25zdCB0b3RhbEFtb3VudCA9IHNoaXBwaW5nRG9jLnRvdGFsX2Ftb3VudCB8fCAwXHJcbiAgICAgIFxyXG4gICAgICBpZiAodG90YWxBbW91bnQgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCJIZXNhcGxhbWEgc29udWN1IGJ1bHVuYW1hZMSxIHZlIHRvcGxhbSB0dXRhciBiaWxnaXNpIHlva1wiIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNDA0IH1cclxuICAgICAgICApXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEtEViBoYXJpw6cgdHV0YXLEsSBoZXNhcGxhIChLRFYgJTE4KVxyXG4gICAgICBjb25zdCBiYXNlQW1vdW50ID0gdG90YWxBbW91bnQgLyAxLjE4XHJcbiAgICAgIGNvbnN0IHRheEFtb3VudCA9IGJhc2VBbW91bnQgKiAwLjE4XHJcbiAgICAgIGNvbnN0IGRpc2NvdW50QW1vdW50ID0gMFxyXG4gICAgICBcclxuICAgICAgLy8gVmFyc2F5xLFsYW4gb2xhcmFrIFNBVElTX0ZBVFVSQVNJIHRpcGluaSBrdWxsYW5cclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIGNhbGN1bGF0ZWRQcmljZTogdG90YWxBbW91bnQsXHJcbiAgICAgICAgICBpbnZvaWNlVHlwZTogJ1NBVElTX0ZBVFVSQVNJJyxcclxuICAgICAgICAgIGJyZWFrZG93bjoge1xyXG4gICAgICAgICAgICBiYXNlQW1vdW50OiBiYXNlQW1vdW50LFxyXG4gICAgICAgICAgICB0YXhBbW91bnQ6IHRheEFtb3VudCxcclxuICAgICAgICAgICAgZGlzY291bnRBbW91bnQ6IGRpc2NvdW50QW1vdW50LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGNhbGN1bGF0aW9uOiB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ01ldmN1dCBUb3BsYW0gVHV0YXInLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiAnSGVzYXBsYW1hIGtheWTEsSBidWx1bmFtYWTEsSwgbWV2Y3V0IHRvcGxhbSB0dXRhciBrdWxsYW7EsWxkxLEnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBjYWxjdWxhdGVkUHJpY2U6IGNhbGN1bGF0aW9uLmNhbGN1bGF0ZWRfcHJpY2UsXHJcbiAgICAgICAgaW52b2ljZVR5cGU6IGNhbGN1bGF0aW9uLmludm9pY2VfdHlwZSxcclxuICAgICAgICBicmVha2Rvd246IHtcclxuICAgICAgICAgIGJhc2VBbW91bnQ6IGNhbGN1bGF0aW9uLmJhc2VfYW1vdW50LFxyXG4gICAgICAgICAgdGF4QW1vdW50OiBjYWxjdWxhdGlvbi50YXhfYW1vdW50LFxyXG4gICAgICAgICAgZGlzY291bnRBbW91bnQ6IGNhbGN1bGF0aW9uLmRpc2NvdW50X2Ftb3VudCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhbGN1bGF0aW9uOiB7XHJcbiAgICAgICAgICBtZXRob2Q6IGNhbGN1bGF0aW9uLmNhbGN1bGF0aW9uX21ldGhvZCB8fCAnJyxcclxuICAgICAgICAgIGRldGFpbHM6IGNhbGN1bGF0aW9uLmNhbGN1bGF0aW9uX2RldGFpbHMgfHwgJycsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJbYXBpL3NoaXBwaW5nL1tpZF0vbGF0ZXN0LWNhbGN1bGF0aW9uXSBIYXRhOlwiLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiSGVzYXBsYW1hIHNvbnVjdSBhbMSxbsSxcmtlbiBiaXIgaGF0YSBvbHXFn3R1XCIgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRMYXRlc3RQcmljZUNhbGN1bGF0aW9uIiwiZ2V0U2hpcHBpbmdEb2N1bWVudEJ5SWQiLCJHRVQiLCJyZXF1ZXN0IiwicGFyYW1zIiwic2hpcHBpbmdJZCIsInBhcnNlSW50IiwiaWQiLCJpc05hTiIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJzaGlwcGluZ0RvYyIsImNhbGN1bGF0aW9uIiwidG90YWxBbW91bnQiLCJ0b3RhbF9hbW91bnQiLCJiYXNlQW1vdW50IiwidGF4QW1vdW50IiwiZGlzY291bnRBbW91bnQiLCJkYXRhIiwiY2FsY3VsYXRlZFByaWNlIiwiaW52b2ljZVR5cGUiLCJicmVha2Rvd24iLCJtZXRob2QiLCJkZXRhaWxzIiwiY2FsY3VsYXRlZF9wcmljZSIsImludm9pY2VfdHlwZSIsImJhc2VfYW1vdW50IiwidGF4X2Ftb3VudCIsImRpc2NvdW50X2Ftb3VudCIsImNhbGN1bGF0aW9uX21ldGhvZCIsImNhbGN1bGF0aW9uX2RldGFpbHMiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/shipping/[id]/latest-calculation/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/database.ts":
/*!*****************************!*\
  !*** ./app/lib/database.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeDatabase: () => (/* binding */ closeDatabase),\n/* harmony export */   createInvoice: () => (/* binding */ createInvoice),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   dbAll: () => (/* binding */ dbAll),\n/* harmony export */   dbGet: () => (/* binding */ dbGet),\n/* harmony export */   dbRun: () => (/* binding */ dbRun),\n/* harmony export */   getInvoices: () => (/* binding */ getInvoices),\n/* harmony export */   getLIFOPrices: () => (/* binding */ getLIFOPrices),\n/* harmony export */   getLatestPriceCalculation: () => (/* binding */ getLatestPriceCalculation),\n/* harmony export */   getPurchaseInvoiceItems: () => (/* binding */ getPurchaseInvoiceItems),\n/* harmony export */   getPurchaseInvoiceWithItems: () => (/* binding */ getPurchaseInvoiceWithItems),\n/* harmony export */   getPurchaseInvoicesBySupplier: () => (/* binding */ getPurchaseInvoicesBySupplier),\n/* harmony export */   getShippingDocumentById: () => (/* binding */ getShippingDocumentById),\n/* harmony export */   getShippingDocuments: () => (/* binding */ getShippingDocuments),\n/* harmony export */   getShippingItems: () => (/* binding */ getShippingItems),\n/* harmony export */   getSupplierById: () => (/* binding */ getSupplierById),\n/* harmony export */   getSuppliers: () => (/* binding */ getSuppliers),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase),\n/* harmony export */   savePriceCalculation: () => (/* binding */ savePriceCalculation),\n/* harmony export */   updateShippingDocumentStatus: () => (/* binding */ updateShippingDocumentStatus)\n/* harmony export */ });\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sqlite3 */ \"sqlite3\");\n/* harmony import */ var sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"(rsc)/./app/lib/utils.ts\");\n\n\n\n\n// SQLite veritabanı bağlantısı\nconst dbPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"database.sqlite\");\nconst db = new (sqlite3__WEBPACK_IMPORTED_MODULE_0___default().Database)(dbPath);\n// Promise tabanlı metodlar\nconst dbRun = (0,util__WEBPACK_IMPORTED_MODULE_1__.promisify)(db.run.bind(db));\nconst dbGet = (0,util__WEBPACK_IMPORTED_MODULE_1__.promisify)(db.get.bind(db));\nconst dbAll = (0,util__WEBPACK_IMPORTED_MODULE_1__.promisify)(db.all.bind(db));\n// Veritabanı başlatma\nasync function initializeDatabase() {\n    try {\n        // Şema dosyasını oku ve çalıştır\n        const fs = __webpack_require__(/*! fs */ \"fs\");\n        const schemaPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"scripts\", \"database-schema.sql\");\n        const seedPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \"scripts\", \"seed-data.sql\");\n        const schema = fs.readFileSync(schemaPath, \"utf8\");\n        const seed = fs.readFileSync(seedPath, \"utf8\");\n        // Şemayı çalıştır\n        await dbRun(schema);\n        console.log(\"✅ Veritabanı şeması oluşturuldu\");\n        // Seed verilerini ekle\n        await dbRun(seed);\n        console.log(\"✅ Test verileri eklendi\");\n    } catch (error) {\n        console.error(\"❌ Veritabanı başlatma hatası:\", error);\n        throw error;\n    }\n}\n// Veritabanı bağlantısını kapat\nfunction closeDatabase() {\n    return new Promise((resolve, reject)=>{\n        db.close((err)=>{\n            if (err) {\n                reject(err);\n            } else {\n                resolve();\n            }\n        });\n    });\n}\n// Types imported from central types file\n// Tedarikçi işlemleri\nasync function getSuppliers(companyId) {\n    if (companyId !== undefined && companyId !== null && companyId !== \"\") {\n        const id = typeof companyId === \"string\" ? parseInt(companyId) : companyId;\n        if (!isNaN(id)) {\n            return await dbAll(\"SELECT * FROM suppliers WHERE company_id = ? ORDER BY supplier_name\", [\n                id\n            ]);\n        }\n    }\n    return await dbAll(\"SELECT * FROM suppliers ORDER BY supplier_name\");\n}\nasync function getSupplierById(id) {\n    return await dbGet(\"SELECT * FROM suppliers WHERE id = ?\", [\n        id\n    ]);\n}\n// İrsaliye işlemleri\nasync function getShippingDocuments(filters = {}) {\n    const { shippingNumber, status, supplierCode, companyId, page = 1, limit = 10 } = filters;\n    // suppliers ile join ederek tedarikçi adı ve kodu alalım\n    let whereClause = \"WHERE 1=1\";\n    const params = [];\n    if (shippingNumber) {\n        whereClause += \" AND sd.shipping_number LIKE ?\";\n        params.push(`%${shippingNumber}%`);\n    }\n    if (status && status !== \"all\") {\n        const dbStatus = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.mapUIStatusToDb)(status);\n        whereClause += \" AND sd.status = ?\";\n        params.push(dbStatus);\n    }\n    if (supplierCode) {\n        whereClause += \" AND s.supplier_code = ?\";\n        params.push(supplierCode);\n    }\n    if (companyId) {\n        whereClause += \" AND s.company_id = ?\";\n        params.push(companyId);\n    }\n    // Toplam sayı (DISTINCT kullanarak GROUP BY'dan önce sayıyoruz)\n    const totalResult = await dbGet(`SELECT COUNT(DISTINCT sd.id) as count\n     FROM shipping_documents sd\n     JOIN suppliers s ON s.id = sd.supplier_id\n     LEFT JOIN companies c ON c.id = s.company_id\n     ${whereClause}`, params);\n    const total = totalResult?.count || 0;\n    // Sayfalama\n    const offset = (page - 1) * limit;\n    const data = await dbAll(`SELECT sd.id,\n            sd.shipping_number,\n            sd.supplier_id,\n            sd.shipping_date,\n            sd.total_amount,\n            sd.item_count,\n            sd.status,\n            sd.notes,\n            sd.created_at,\n            sd.updated_at,\n            s.supplier_name, \n            s.supplier_code, \n            s.id as supplier_id, \n            s.company_id, \n            c.company_name,\n            i.invoice_number,\n            COALESCE(SUM(si.quantity), 0) as total_quantity\n     FROM shipping_documents sd\n     JOIN suppliers s ON s.id = sd.supplier_id\n     LEFT JOIN companies c ON c.id = s.company_id\n     LEFT JOIN shipping_items si ON si.shipping_id = sd.id\n     LEFT JOIN invoices i ON i.shipping_id = sd.id\n     ${whereClause}\n     GROUP BY sd.id, sd.shipping_number, sd.supplier_id, sd.shipping_date, sd.total_amount, sd.item_count, sd.status, sd.notes, sd.created_at, sd.updated_at, s.supplier_name, s.supplier_code, s.id, s.company_id, c.company_name, i.invoice_number\n     ORDER BY sd.created_at DESC LIMIT ? OFFSET ?`, [\n        ...params,\n        limit,\n        offset\n    ]);\n    return {\n        data,\n        total\n    };\n}\nasync function getShippingDocumentById(id) {\n    return await dbGet(\"SELECT * FROM shipping_documents WHERE id = ?\", [\n        id\n    ]);\n}\nasync function getShippingItems(shippingId) {\n    return await dbAll(\"SELECT * FROM shipping_items WHERE shipping_id = ?\", [\n        shippingId\n    ]);\n}\n// İrsaliye durum/tutar güncelleme\nasync function updateShippingDocumentStatus(params) {\n    const { shipping_id, status, total_amount } = params;\n    const dbStatus = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.mapUIStatusToDb)(status);\n    if (typeof total_amount === \"number\") {\n        await dbRun(\"UPDATE shipping_documents SET status = ?, total_amount = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?\", [\n            dbStatus,\n            total_amount,\n            shipping_id\n        ]);\n    } else {\n        await dbRun(\"UPDATE shipping_documents SET status = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?\", [\n            dbStatus,\n            shipping_id\n        ]);\n    }\n}\n// Fatura işlemleri\nasync function getInvoices(filters = {}) {\n    const { search, status, page = 1, limit = 10 } = filters;\n    let whereClause = \"WHERE 1=1\";\n    const params = [];\n    if (search) {\n        whereClause += \" AND (invoice_number LIKE ? OR notes LIKE ?)\";\n        params.push(`%${search}%`, `%${search}%`);\n    }\n    if (status && status !== \"all\") {\n        whereClause += \" AND status = ?\";\n        params.push(status);\n    }\n    // Toplam sayı\n    const totalResult = await dbGet(`SELECT COUNT(*) as count FROM invoices ${whereClause}`, params);\n    const total = totalResult?.count || 0;\n    // Sayfalama\n    const offset = (page - 1) * limit;\n    const data = await dbAll(`SELECT * FROM invoices ${whereClause} ORDER BY created_at DESC LIMIT ? OFFSET ?`, [\n        ...params,\n        limit,\n        offset\n    ]);\n    return {\n        data,\n        total\n    };\n}\nasync function createInvoice(invoiceData) {\n    // Fatura numarası oluştur: 1-R-7-XXX formatında (XXX 3 haneli sayı)\n    const countResult = await dbGet(\"SELECT COUNT(*) as count FROM invoices WHERE invoice_number LIKE ?\", [\n        \"1-R-7-%\"\n    ]);\n    const count = (countResult?.count || 0) + 1;\n    const invoiceNumber = `1-R-7-${count.toString().padStart(3, \"0\")}`;\n    const result = await dbRun(`INSERT INTO invoices (invoice_number, shipping_id, invoice_type, base_amount, tax_amount, discount_amount, total_amount, created_date, due_date, status)\n     VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, 'created')`, [\n        invoiceNumber,\n        invoiceData.shipping_id,\n        invoiceData.invoice_type,\n        invoiceData.base_amount,\n        invoiceData.tax_amount,\n        invoiceData.discount_amount,\n        invoiceData.total_amount,\n        invoiceData.created_date,\n        invoiceData.due_date\n    ]);\n    const newInvoice = await dbGet(\"SELECT * FROM invoices WHERE id = last_insert_rowid()\");\n    // İrsaliye durumunu 'invoiced' yap ve toplam tutarı güncelle\n    // Fatura oluşunca UI'da Faturalandırıldı gözükecek şekilde status güncelle\n    const invoicedStatus = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.mapUIStatusToDb)(\"invoiced\");\n    await dbRun(\"UPDATE shipping_documents SET status = ?, total_amount = ?, updated_at = CURRENT_TIMESTAMP WHERE id = ?\", [\n        invoicedStatus,\n        invoiceData.total_amount,\n        invoiceData.shipping_id\n    ]);\n    return newInvoice;\n}\n// Fiyat hesaplama işlemleri\nasync function savePriceCalculation(calculationData) {\n    const result = await dbRun(`INSERT INTO price_calculations (shipping_id, invoice_type, calculated_price, base_amount, tax_amount, discount_amount, calculation_method, calculation_details)\n     VALUES (?, ?, ?, ?, ?, ?, ?, ?)`, [\n        calculationData.shipping_id,\n        calculationData.invoice_type,\n        calculationData.calculated_price,\n        calculationData.base_amount,\n        calculationData.tax_amount,\n        calculationData.discount_amount,\n        calculationData.calculation_method,\n        calculationData.calculation_details\n    ]);\n    // SQLite'da lastID yerine lastInsertRowid kullan\n    const newCalculation = await dbGet(\"SELECT * FROM price_calculations WHERE id = last_insert_rowid()\");\n    return newCalculation;\n}\n// En son hesaplama sonucunu al\nasync function getLatestPriceCalculation(shippingId) {\n    return await dbGet(\"SELECT * FROM price_calculations WHERE shipping_id = ? ORDER BY created_at DESC LIMIT 1\", [\n        shippingId\n    ]);\n}\nasync function getPurchaseInvoicesBySupplier(supplierId, productCode) {\n    let query = `\n    SELECT DISTINCT pi.*\n    FROM purchase_invoices pi\n    WHERE pi.supplier_id = ?\n  `;\n    const params = [\n        supplierId\n    ];\n    if (productCode) {\n        const normalizedProductCode = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.normalizeProductCode)(productCode);\n        // Önce tam eşleşme dene\n        let searchQuery = `\n      SELECT DISTINCT pi.*\n      FROM purchase_invoices pi\n      WHERE pi.supplier_id = ?\n      AND EXISTS (\n        SELECT 1 FROM purchase_invoice_items pii\n        WHERE pii.invoice_id = pi.id \n        AND UPPER(REPLACE(REPLACE(pii.product_code, ' ', '-'), '  ', '-')) = ?\n      )\n      ORDER BY pi.invoice_date DESC\n    `;\n        let searchParams = [\n            supplierId,\n            normalizedProductCode\n        ];\n        let result = await dbAll(searchQuery, searchParams);\n        // Eğer sonuç bulunamazsa, sadece sayısal kısmı (renk kodunu çıkararak) dene\n        if (result.length === 0) {\n            const numericPart = normalizedProductCode.split(\"-\")[0];\n            if (numericPart && numericPart !== normalizedProductCode) {\n                searchQuery = `\n          SELECT DISTINCT pi.*\n          FROM purchase_invoices pi\n          WHERE pi.supplier_id = ?\n          AND EXISTS (\n            SELECT 1 FROM purchase_invoice_items pii\n            WHERE pii.invoice_id = pi.id \n            AND UPPER(REPLACE(REPLACE(pii.product_code, ' ', '-'), '  ', '-')) LIKE ?\n          )\n          ORDER BY pi.invoice_date DESC\n        `;\n                searchParams = [\n                    supplierId,\n                    `${numericPart}-%`\n                ];\n                result = await dbAll(searchQuery, searchParams);\n            }\n        }\n        return result;\n    }\n    query += \" ORDER BY pi.invoice_date DESC\";\n    return await dbAll(query, params);\n}\nasync function getPurchaseInvoiceItems(invoiceId) {\n    return await dbAll(\"SELECT * FROM purchase_invoice_items WHERE invoice_id = ?\", [\n        invoiceId\n    ]);\n}\nasync function getPurchaseInvoiceWithItems(invoiceId) {\n    const invoice = await dbGet(\"SELECT * FROM purchase_invoices WHERE id = ?\", [\n        invoiceId\n    ]);\n    if (!invoice) return null;\n    const items = await getPurchaseInvoiceItems(invoiceId);\n    return {\n        invoice,\n        items\n    };\n}\n// LIFO hesaplama: Belirli bir ürün için tedarikçinin faturalarından LIFO mantığıyla birim fiyatları hesapla\nasync function getLIFOPrices(supplierId, productCode, quantity) {\n    const normalizedProductCode = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.normalizeProductCode)(productCode);\n    // Önce tam eşleşme dene\n    let invoices = await dbAll(`\n    SELECT pi.id, pi.invoice_number, pi.invoice_date, pii.quantity, pii.unit_price\n    FROM purchase_invoices pi\n    JOIN purchase_invoice_items pii ON pii.invoice_id = pi.id\n    WHERE pi.supplier_id = ? AND UPPER(REPLACE(REPLACE(pii.product_code, ' ', '-'), '  ', '-')) = ?\n    ORDER BY pi.invoice_date DESC, pi.id DESC\n  `, [\n        supplierId,\n        normalizedProductCode\n    ]);\n    // Eğer bulunamazsa, sadece sayısal kısmı (renk kodunu çıkararak) dene\n    if (invoices.length === 0) {\n        const numericPart = normalizedProductCode.split(\"-\")[0];\n        if (numericPart && numericPart !== normalizedProductCode) {\n            invoices = await dbAll(`\n        SELECT pi.id, pi.invoice_number, pi.invoice_date, pii.quantity, pii.unit_price\n        FROM purchase_invoices pi\n        JOIN purchase_invoice_items pii ON pii.invoice_id = pi.id\n        WHERE pi.supplier_id = ? AND UPPER(REPLACE(REPLACE(pii.product_code, ' ', '-'), '  ', '-')) LIKE ?\n        ORDER BY pi.invoice_date DESC, pi.id DESC\n      `, [\n                supplierId,\n                `${numericPart}-%`\n            ]);\n        }\n    }\n    const result = [];\n    let remainingQuantity = quantity;\n    for (const invoice of invoices){\n        if (remainingQuantity <= 0) break;\n        const availableQuantity = invoice.quantity;\n        const takeQuantity = Math.min(remainingQuantity, availableQuantity);\n        if (takeQuantity > 0) {\n            result.push({\n                invoiceId: invoice.id,\n                invoiceNumber: invoice.invoice_number,\n                invoiceDate: invoice.invoice_date,\n                quantity: takeQuantity,\n                unitPrice: invoice.unit_price,\n                total: takeQuantity * invoice.unit_price\n            });\n            remainingQuantity -= takeQuantity;\n        }\n    }\n    return result;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQVksRUFBRSxDQUFDO2FBQUM7UUFDckM7SUFDRjtJQUVBLE1BQU14QixTQU9ELEVBQUU7SUFFUCxJQUFJa0Msb0JBQW9CRjtJQUV4QixLQUFLLE1BQU1ILFdBQVdJLFNBQVU7UUFDOUIsSUFBSUMscUJBQXFCLEdBQUc7UUFFNUIsTUFBTUMsb0JBQW9CTixRQUFRRyxRQUFRO1FBQzFDLE1BQU1JLGVBQWVDLEtBQUtDLEdBQUcsQ0FBQ0osbUJBQW1CQztRQUVqRCxJQUFJQyxlQUFlLEdBQUc7WUFDcEJwQyxPQUFPckIsSUFBSSxDQUFDO2dCQUNWZ0QsV0FBV0UsUUFBUS9ELEVBQUU7Z0JBQ3JCK0IsZUFBZWdDLFFBQVFVLGNBQWM7Z0JBQ3JDQyxhQUFhWCxRQUFRWSxZQUFZO2dCQUNqQ1QsVUFBVUk7Z0JBQ1ZNLFdBQVdiLFFBQVFjLFVBQVU7Z0JBQzdCN0QsT0FBT3NELGVBQWVQLFFBQVFjLFVBQVU7WUFDMUM7WUFFQVQscUJBQXFCRTtRQUN2QjtJQUNGO0lBRUEsT0FBT3BDO0FBQ1Q7QUFFbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZWRhcmlrY2ktaXJzYWxpeWUvLi9hcHAvbGliL2RhdGFiYXNlLnRzPzZkNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNxbGl0ZTMgZnJvbSAnc3FsaXRlMyc7XG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgbm9ybWFsaXplUHJvZHVjdENvZGUsIG1hcFVJU3RhdHVzVG9EYiB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHR5cGUge1xuICBTdXBwbGllcixcbiAgU2hpcHBpbmdEb2N1bWVudCxcbiAgU2hpcHBpbmdJdGVtLFxuICBJbnZvaWNlLFxuICBQcmljZUNhbGN1bGF0aW9uLFxuICBQdXJjaGFzZUludm9pY2UsXG4gIFB1cmNoYXNlSW52b2ljZUl0ZW0sXG4gIFVJU3RhdHVzLFxufSBmcm9tICcuL3R5cGVzJztcblxuLy8gU1FMaXRlIHZlcml0YWJhbsSxIGJhxJ9sYW50xLFzxLFcbmNvbnN0IGRiUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YWJhc2Uuc3FsaXRlJyk7XG5jb25zdCBkYiA9IG5ldyBzcWxpdGUzLkRhdGFiYXNlKGRiUGF0aCk7XG5cbi8vIFByb21pc2UgdGFiYW5sxLEgbWV0b2RsYXJcbmNvbnN0IGRiUnVuID0gcHJvbWlzaWZ5KGRiLnJ1bi5iaW5kKGRiKSk7XG5jb25zdCBkYkdldCA9IHByb21pc2lmeShkYi5nZXQuYmluZChkYikpO1xuY29uc3QgZGJBbGwgPSBwcm9taXNpZnkoZGIuYWxsLmJpbmQoZGIpKTtcblxuLy8gVmVyaXRhYmFuxLEgYmHFn2xhdG1hXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZURhdGFiYXNlKCkge1xuICB0cnkge1xuICAgIC8vIMWeZW1hIGRvc3lhc8SxbsSxIG9rdSB2ZSDDp2FsxLHFn3TEsXJcbiAgICBjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG4gICAgY29uc3Qgc2NoZW1hUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnc2NyaXB0cycsICdkYXRhYmFzZS1zY2hlbWEuc3FsJyk7XG4gICAgY29uc3Qgc2VlZFBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3NjcmlwdHMnLCAnc2VlZC1kYXRhLnNxbCcpO1xuICAgIFxuICAgIGNvbnN0IHNjaGVtYSA9IGZzLnJlYWRGaWxlU3luYyhzY2hlbWFQYXRoLCAndXRmOCcpO1xuICAgIGNvbnN0IHNlZWQgPSBmcy5yZWFkRmlsZVN5bmMoc2VlZFBhdGgsICd1dGY4Jyk7XG4gICAgXG4gICAgLy8gxZ5lbWF5xLEgw6dhbMSxxZ90xLFyXG4gICAgYXdhaXQgZGJSdW4oc2NoZW1hKTtcbiAgICBjb25zb2xlLmxvZygn4pyFIFZlcml0YWJhbsSxIMWfZW1hc8SxIG9sdcWfdHVydWxkdScpO1xuICAgIFxuICAgIC8vIFNlZWQgdmVyaWxlcmluaSBla2xlXG4gICAgYXdhaXQgZGJSdW4oc2VlZCk7XG4gICAgY29uc29sZS5sb2coJ+KchSBUZXN0IHZlcmlsZXJpIGVrbGVuZGknKTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgVmVyaXRhYmFuxLEgYmHFn2xhdG1hIGhhdGFzxLE6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIFZlcml0YWJhbsSxIGJhxJ9sYW50xLFzxLFuxLEga2FwYXRcbmV4cG9ydCBmdW5jdGlvbiBjbG9zZURhdGFiYXNlKCkge1xuICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGRiLmNsb3NlKChlcnIpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vLyBUeXBlcyBpbXBvcnRlZCBmcm9tIGNlbnRyYWwgdHlwZXMgZmlsZVxuXG4vLyBUZWRhcmlrw6dpIGnFn2xlbWxlcmlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdXBwbGllcnMoY29tcGFueUlkPzogc3RyaW5nIHwgbnVtYmVyKTogUHJvbWlzZTxTdXBwbGllcltdPiB7XG4gIGlmIChjb21wYW55SWQgIT09IHVuZGVmaW5lZCAmJiBjb21wYW55SWQgIT09IG51bGwgJiYgY29tcGFueUlkICE9PSAnJykge1xuICAgIGNvbnN0IGlkID0gdHlwZW9mIGNvbXBhbnlJZCA9PT0gJ3N0cmluZycgPyBwYXJzZUludChjb21wYW55SWQpIDogY29tcGFueUlkXG4gICAgaWYgKCFpc05hTihpZCkpIHtcbiAgICAgIHJldHVybiBhd2FpdCBkYkFsbCgnU0VMRUNUICogRlJPTSBzdXBwbGllcnMgV0hFUkUgY29tcGFueV9pZCA9ID8gT1JERVIgQlkgc3VwcGxpZXJfbmFtZScsIFtpZF0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXdhaXQgZGJBbGwoJ1NFTEVDVCAqIEZST00gc3VwcGxpZXJzIE9SREVSIEJZIHN1cHBsaWVyX25hbWUnKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN1cHBsaWVyQnlJZChpZDogbnVtYmVyKTogUHJvbWlzZTxTdXBwbGllciB8IG51bGw+IHtcbiAgcmV0dXJuIGF3YWl0IGRiR2V0KCdTRUxFQ1QgKiBGUk9NIHN1cHBsaWVycyBXSEVSRSBpZCA9ID8nLCBbaWRdKSBhcyBTdXBwbGllciB8IG51bGw7XG59XG5cbi8vIMSwcnNhbGl5ZSBpxZ9sZW1sZXJpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2hpcHBpbmdEb2N1bWVudHMoZmlsdGVyczoge1xuICBzaGlwcGluZ051bWJlcj86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBzdXBwbGllckNvZGU/OiBzdHJpbmc7XG4gIGNvbXBhbnlJZD86IHN0cmluZzsgLy8gxZ5pbWRpbGlrIMWfZW1hIHlvazsgaWxlcmlkZSBjb21wYW55IGlsacWfa2lzaSBla2xlbmlyc2Uga3VsbGFuxLFsxLFyXG4gIHBhZ2U/OiBudW1iZXI7XG4gIGxpbWl0PzogbnVtYmVyO1xufSA9IHt9KTogUHJvbWlzZTx7IGRhdGE6IFNoaXBwaW5nRG9jdW1lbnRbXTsgdG90YWw6IG51bWJlciB9PiB7XG4gIGNvbnN0IHsgc2hpcHBpbmdOdW1iZXIsIHN0YXR1cywgc3VwcGxpZXJDb2RlLCBjb21wYW55SWQsIHBhZ2UgPSAxLCBsaW1pdCA9IDEwIH0gPSBmaWx0ZXJzO1xuICBcbiAgLy8gc3VwcGxpZXJzIGlsZSBqb2luIGVkZXJlayB0ZWRhcmlrw6dpIGFkxLEgdmUga29kdSBhbGFsxLFtXG4gIGxldCB3aGVyZUNsYXVzZSA9ICdXSEVSRSAxPTEnO1xuICBjb25zdCBwYXJhbXM6IChzdHJpbmcgfCBudW1iZXIpW10gPSBbXTtcbiAgXG4gIGlmIChzaGlwcGluZ051bWJlcikge1xuICAgIHdoZXJlQ2xhdXNlICs9ICcgQU5EIHNkLnNoaXBwaW5nX251bWJlciBMSUtFID8nO1xuICAgIHBhcmFtcy5wdXNoKGAlJHtzaGlwcGluZ051bWJlcn0lYCk7XG4gIH1cbiAgXG4gIGlmIChzdGF0dXMgJiYgc3RhdHVzICE9PSAnYWxsJykge1xuICAgIGNvbnN0IGRiU3RhdHVzID0gbWFwVUlTdGF0dXNUb0RiKHN0YXR1cyBhcyBVSVN0YXR1cyk7XG4gICAgd2hlcmVDbGF1c2UgKz0gJyBBTkQgc2Quc3RhdHVzID0gPyc7XG4gICAgcGFyYW1zLnB1c2goZGJTdGF0dXMpO1xuICB9XG5cbiAgaWYgKHN1cHBsaWVyQ29kZSkge1xuICAgIHdoZXJlQ2xhdXNlICs9ICcgQU5EIHMuc3VwcGxpZXJfY29kZSA9ID8nO1xuICAgIHBhcmFtcy5wdXNoKHN1cHBsaWVyQ29kZSk7XG4gIH1cbiAgXG4gIGlmIChjb21wYW55SWQpIHtcbiAgICB3aGVyZUNsYXVzZSArPSAnIEFORCBzLmNvbXBhbnlfaWQgPSA/JztcbiAgICBwYXJhbXMucHVzaChjb21wYW55SWQpO1xuICB9XG4gIFxuICAvLyBUb3BsYW0gc2F5xLEgKERJU1RJTkNUIGt1bGxhbmFyYWsgR1JPVVAgQlknZGFuIMO2bmNlIHNhecSxeW9ydXopXG4gIGNvbnN0IHRvdGFsUmVzdWx0ID0gYXdhaXQgZGJHZXQoXG4gICAgYFNFTEVDVCBDT1VOVChESVNUSU5DVCBzZC5pZCkgYXMgY291bnRcbiAgICAgRlJPTSBzaGlwcGluZ19kb2N1bWVudHMgc2RcbiAgICAgSk9JTiBzdXBwbGllcnMgcyBPTiBzLmlkID0gc2Quc3VwcGxpZXJfaWRcbiAgICAgTEVGVCBKT0lOIGNvbXBhbmllcyBjIE9OIGMuaWQgPSBzLmNvbXBhbnlfaWRcbiAgICAgJHt3aGVyZUNsYXVzZX1gLFxuICAgIHBhcmFtc1xuICApO1xuICBjb25zdCB0b3RhbCA9IHRvdGFsUmVzdWx0Py5jb3VudCB8fCAwO1xuICBcbiAgLy8gU2F5ZmFsYW1hXG4gIGNvbnN0IG9mZnNldCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGRiQWxsKFxuICAgIGBTRUxFQ1Qgc2QuaWQsXG4gICAgICAgICAgICBzZC5zaGlwcGluZ19udW1iZXIsXG4gICAgICAgICAgICBzZC5zdXBwbGllcl9pZCxcbiAgICAgICAgICAgIHNkLnNoaXBwaW5nX2RhdGUsXG4gICAgICAgICAgICBzZC50b3RhbF9hbW91bnQsXG4gICAgICAgICAgICBzZC5pdGVtX2NvdW50LFxuICAgICAgICAgICAgc2Quc3RhdHVzLFxuICAgICAgICAgICAgc2Qubm90ZXMsXG4gICAgICAgICAgICBzZC5jcmVhdGVkX2F0LFxuICAgICAgICAgICAgc2QudXBkYXRlZF9hdCxcbiAgICAgICAgICAgIHMuc3VwcGxpZXJfbmFtZSwgXG4gICAgICAgICAgICBzLnN1cHBsaWVyX2NvZGUsIFxuICAgICAgICAgICAgcy5pZCBhcyBzdXBwbGllcl9pZCwgXG4gICAgICAgICAgICBzLmNvbXBhbnlfaWQsIFxuICAgICAgICAgICAgYy5jb21wYW55X25hbWUsXG4gICAgICAgICAgICBpLmludm9pY2VfbnVtYmVyLFxuICAgICAgICAgICAgQ09BTEVTQ0UoU1VNKHNpLnF1YW50aXR5KSwgMCkgYXMgdG90YWxfcXVhbnRpdHlcbiAgICAgRlJPTSBzaGlwcGluZ19kb2N1bWVudHMgc2RcbiAgICAgSk9JTiBzdXBwbGllcnMgcyBPTiBzLmlkID0gc2Quc3VwcGxpZXJfaWRcbiAgICAgTEVGVCBKT0lOIGNvbXBhbmllcyBjIE9OIGMuaWQgPSBzLmNvbXBhbnlfaWRcbiAgICAgTEVGVCBKT0lOIHNoaXBwaW5nX2l0ZW1zIHNpIE9OIHNpLnNoaXBwaW5nX2lkID0gc2QuaWRcbiAgICAgTEVGVCBKT0lOIGludm9pY2VzIGkgT04gaS5zaGlwcGluZ19pZCA9IHNkLmlkXG4gICAgICR7d2hlcmVDbGF1c2V9XG4gICAgIEdST1VQIEJZIHNkLmlkLCBzZC5zaGlwcGluZ19udW1iZXIsIHNkLnN1cHBsaWVyX2lkLCBzZC5zaGlwcGluZ19kYXRlLCBzZC50b3RhbF9hbW91bnQsIHNkLml0ZW1fY291bnQsIHNkLnN0YXR1cywgc2Qubm90ZXMsIHNkLmNyZWF0ZWRfYXQsIHNkLnVwZGF0ZWRfYXQsIHMuc3VwcGxpZXJfbmFtZSwgcy5zdXBwbGllcl9jb2RlLCBzLmlkLCBzLmNvbXBhbnlfaWQsIGMuY29tcGFueV9uYW1lLCBpLmludm9pY2VfbnVtYmVyXG4gICAgIE9SREVSIEJZIHNkLmNyZWF0ZWRfYXQgREVTQyBMSU1JVCA/IE9GRlNFVCA/YCxcbiAgICBbLi4ucGFyYW1zLCBsaW1pdCwgb2Zmc2V0XVxuICApO1xuICBcbiAgcmV0dXJuIHsgZGF0YSwgdG90YWwgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNoaXBwaW5nRG9jdW1lbnRCeUlkKGlkOiBudW1iZXIpOiBQcm9taXNlPFNoaXBwaW5nRG9jdW1lbnQgfCBudWxsPiB7XG4gIHJldHVybiBhd2FpdCBkYkdldCgnU0VMRUNUICogRlJPTSBzaGlwcGluZ19kb2N1bWVudHMgV0hFUkUgaWQgPSA/JywgW2lkXSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTaGlwcGluZ0l0ZW1zKHNoaXBwaW5nSWQ6IG51bWJlcik6IFByb21pc2U8U2hpcHBpbmdJdGVtW10+IHtcbiAgcmV0dXJuIGF3YWl0IGRiQWxsKCdTRUxFQ1QgKiBGUk9NIHNoaXBwaW5nX2l0ZW1zIFdIRVJFIHNoaXBwaW5nX2lkID0gPycsIFtzaGlwcGluZ0lkXSk7XG59XG5cbi8vIMSwcnNhbGl5ZSBkdXJ1bS90dXRhciBnw7xuY2VsbGVtZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVNoaXBwaW5nRG9jdW1lbnRTdGF0dXMocGFyYW1zOiB7XG4gIHNoaXBwaW5nX2lkOiBudW1iZXI7XG4gIHN0YXR1czogVUlTdGF0dXM7XG4gIHRvdGFsX2Ftb3VudD86IG51bWJlcjtcbn0pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyBzaGlwcGluZ19pZCwgc3RhdHVzLCB0b3RhbF9hbW91bnQgfSA9IHBhcmFtcztcbiAgY29uc3QgZGJTdGF0dXMgPSBtYXBVSVN0YXR1c1RvRGIoc3RhdHVzKTtcbiAgXG4gIGlmICh0eXBlb2YgdG90YWxfYW1vdW50ID09PSAnbnVtYmVyJykge1xuICAgIGF3YWl0IGRiUnVuKFxuICAgICAgJ1VQREFURSBzaGlwcGluZ19kb2N1bWVudHMgU0VUIHN0YXR1cyA9ID8sIHRvdGFsX2Ftb3VudCA9ID8sIHVwZGF0ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCBXSEVSRSBpZCA9ID8nLFxuICAgICAgW2RiU3RhdHVzLCB0b3RhbF9hbW91bnQsIHNoaXBwaW5nX2lkXVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgZGJSdW4oXG4gICAgICAnVVBEQVRFIHNoaXBwaW5nX2RvY3VtZW50cyBTRVQgc3RhdHVzID0gPywgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QIFdIRVJFIGlkID0gPycsXG4gICAgICBbZGJTdGF0dXMsIHNoaXBwaW5nX2lkXVxuICAgICk7XG4gIH1cbn1cblxuLy8gRmF0dXJhIGnFn2xlbWxlcmlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJbnZvaWNlcyhmaWx0ZXJzOiB7XG4gIHNlYXJjaD86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBwYWdlPzogbnVtYmVyO1xuICBsaW1pdD86IG51bWJlcjtcbn0gPSB7fSk6IFByb21pc2U8eyBkYXRhOiBJbnZvaWNlW107IHRvdGFsOiBudW1iZXIgfT4ge1xuICBjb25zdCB7IHNlYXJjaCwgc3RhdHVzLCBwYWdlID0gMSwgbGltaXQgPSAxMCB9ID0gZmlsdGVycztcbiAgXG4gIGxldCB3aGVyZUNsYXVzZSA9ICdXSEVSRSAxPTEnO1xuICBjb25zdCBwYXJhbXM6IChzdHJpbmcgfCBudW1iZXIpW10gPSBbXTtcbiAgXG4gIGlmIChzZWFyY2gpIHtcbiAgICB3aGVyZUNsYXVzZSArPSAnIEFORCAoaW52b2ljZV9udW1iZXIgTElLRSA/IE9SIG5vdGVzIExJS0UgPyknO1xuICAgIHBhcmFtcy5wdXNoKGAlJHtzZWFyY2h9JWAsIGAlJHtzZWFyY2h9JWApO1xuICB9XG4gIFxuICBpZiAoc3RhdHVzICYmIHN0YXR1cyAhPT0gJ2FsbCcpIHtcbiAgICB3aGVyZUNsYXVzZSArPSAnIEFORCBzdGF0dXMgPSA/JztcbiAgICBwYXJhbXMucHVzaChzdGF0dXMpO1xuICB9XG4gIFxuICAvLyBUb3BsYW0gc2F5xLFcbiAgY29uc3QgdG90YWxSZXN1bHQgPSBhd2FpdCBkYkdldChgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gaW52b2ljZXMgJHt3aGVyZUNsYXVzZX1gLCBwYXJhbXMpO1xuICBjb25zdCB0b3RhbCA9IHRvdGFsUmVzdWx0Py5jb3VudCB8fCAwO1xuICBcbiAgLy8gU2F5ZmFsYW1hXG4gIGNvbnN0IG9mZnNldCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGRiQWxsKFxuICAgIGBTRUxFQ1QgKiBGUk9NIGludm9pY2VzICR7d2hlcmVDbGF1c2V9IE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBMSU1JVCA/IE9GRlNFVCA/YCxcbiAgICBbLi4ucGFyYW1zLCBsaW1pdCwgb2Zmc2V0XVxuICApO1xuICBcbiAgcmV0dXJuIHsgZGF0YSwgdG90YWwgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUludm9pY2UoaW52b2ljZURhdGE6IHtcbiAgc2hpcHBpbmdfaWQ6IG51bWJlcjtcbiAgaW52b2ljZV90eXBlOiAnTElGTycgfCAnU0FUSVNfRkFUVVJBU0knO1xuICBiYXNlX2Ftb3VudDogbnVtYmVyO1xuICB0YXhfYW1vdW50OiBudW1iZXI7XG4gIGRpc2NvdW50X2Ftb3VudDogbnVtYmVyO1xuICB0b3RhbF9hbW91bnQ6IG51bWJlcjtcbiAgY3JlYXRlZF9kYXRlOiBzdHJpbmc7XG4gIGR1ZV9kYXRlOiBzdHJpbmc7XG59KTogUHJvbWlzZTxJbnZvaWNlPiB7XG4gIC8vIEZhdHVyYSBudW1hcmFzxLEgb2x1xZ90dXI6IDEtUi03LVhYWCBmb3JtYXTEsW5kYSAoWFhYIDMgaGFuZWxpIHNhecSxKVxuICBjb25zdCBjb3VudFJlc3VsdCA9IGF3YWl0IGRiR2V0KCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBpbnZvaWNlcyBXSEVSRSBpbnZvaWNlX251bWJlciBMSUtFID8nLCBbJzEtUi03LSUnXSk7XG4gIGNvbnN0IGNvdW50ID0gKGNvdW50UmVzdWx0Py5jb3VudCB8fCAwKSArIDE7XG4gIGNvbnN0IGludm9pY2VOdW1iZXIgPSBgMS1SLTctJHtjb3VudC50b1N0cmluZygpLnBhZFN0YXJ0KDMsICcwJyl9YDtcbiAgXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUnVuKFxuICAgIGBJTlNFUlQgSU5UTyBpbnZvaWNlcyAoaW52b2ljZV9udW1iZXIsIHNoaXBwaW5nX2lkLCBpbnZvaWNlX3R5cGUsIGJhc2VfYW1vdW50LCB0YXhfYW1vdW50LCBkaXNjb3VudF9hbW91bnQsIHRvdGFsX2Ftb3VudCwgY3JlYXRlZF9kYXRlLCBkdWVfZGF0ZSwgc3RhdHVzKVxuICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sICdjcmVhdGVkJylgLFxuICAgIFtcbiAgICAgIGludm9pY2VOdW1iZXIsXG4gICAgICBpbnZvaWNlRGF0YS5zaGlwcGluZ19pZCxcbiAgICAgIGludm9pY2VEYXRhLmludm9pY2VfdHlwZSxcbiAgICAgIGludm9pY2VEYXRhLmJhc2VfYW1vdW50LFxuICAgICAgaW52b2ljZURhdGEudGF4X2Ftb3VudCxcbiAgICAgIGludm9pY2VEYXRhLmRpc2NvdW50X2Ftb3VudCxcbiAgICAgIGludm9pY2VEYXRhLnRvdGFsX2Ftb3VudCxcbiAgICAgIGludm9pY2VEYXRhLmNyZWF0ZWRfZGF0ZSxcbiAgICAgIGludm9pY2VEYXRhLmR1ZV9kYXRlXG4gICAgXVxuICApO1xuICBcbiAgY29uc3QgbmV3SW52b2ljZSA9IGF3YWl0IGRiR2V0KCdTRUxFQ1QgKiBGUk9NIGludm9pY2VzIFdIRVJFIGlkID0gbGFzdF9pbnNlcnRfcm93aWQoKScpO1xuXG4gIC8vIMSwcnNhbGl5ZSBkdXJ1bXVudSAnaW52b2ljZWQnIHlhcCB2ZSB0b3BsYW0gdHV0YXLEsSBnw7xuY2VsbGVcbiAgLy8gRmF0dXJhIG9sdcWfdW5jYSBVSSdkYSBGYXR1cmFsYW5kxLFyxLFsZMSxIGfDtnrDvGtlY2VrIMWfZWtpbGRlIHN0YXR1cyBnw7xuY2VsbGVcbiAgY29uc3QgaW52b2ljZWRTdGF0dXMgPSBtYXBVSVN0YXR1c1RvRGIoJ2ludm9pY2VkJyk7XG4gIGF3YWl0IGRiUnVuKFxuICAgICdVUERBVEUgc2hpcHBpbmdfZG9jdW1lbnRzIFNFVCBzdGF0dXMgPSA/LCB0b3RhbF9hbW91bnQgPSA/LCB1cGRhdGVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVAgV0hFUkUgaWQgPSA/JyxcbiAgICBbaW52b2ljZWRTdGF0dXMsIGludm9pY2VEYXRhLnRvdGFsX2Ftb3VudCwgaW52b2ljZURhdGEuc2hpcHBpbmdfaWRdXG4gICk7XG4gIHJldHVybiBuZXdJbnZvaWNlO1xufVxuXG4vLyBGaXlhdCBoZXNhcGxhbWEgacWfbGVtbGVyaVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVQcmljZUNhbGN1bGF0aW9uKGNhbGN1bGF0aW9uRGF0YToge1xuICBzaGlwcGluZ19pZDogbnVtYmVyO1xuICBpbnZvaWNlX3R5cGU6IHN0cmluZztcbiAgY2FsY3VsYXRlZF9wcmljZTogbnVtYmVyO1xuICBiYXNlX2Ftb3VudDogbnVtYmVyO1xuICB0YXhfYW1vdW50OiBudW1iZXI7XG4gIGRpc2NvdW50X2Ftb3VudDogbnVtYmVyO1xuICBjYWxjdWxhdGlvbl9tZXRob2Q/OiBzdHJpbmc7XG4gIGNhbGN1bGF0aW9uX2RldGFpbHM/OiBzdHJpbmc7XG59KTogUHJvbWlzZTxQcmljZUNhbGN1bGF0aW9uPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiUnVuKFxuICAgIGBJTlNFUlQgSU5UTyBwcmljZV9jYWxjdWxhdGlvbnMgKHNoaXBwaW5nX2lkLCBpbnZvaWNlX3R5cGUsIGNhbGN1bGF0ZWRfcHJpY2UsIGJhc2VfYW1vdW50LCB0YXhfYW1vdW50LCBkaXNjb3VudF9hbW91bnQsIGNhbGN1bGF0aW9uX21ldGhvZCwgY2FsY3VsYXRpb25fZGV0YWlscylcbiAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/LCA/LCA/LCA/KWAsXG4gICAgW1xuICAgICAgY2FsY3VsYXRpb25EYXRhLnNoaXBwaW5nX2lkLFxuICAgICAgY2FsY3VsYXRpb25EYXRhLmludm9pY2VfdHlwZSxcbiAgICAgIGNhbGN1bGF0aW9uRGF0YS5jYWxjdWxhdGVkX3ByaWNlLFxuICAgICAgY2FsY3VsYXRpb25EYXRhLmJhc2VfYW1vdW50LFxuICAgICAgY2FsY3VsYXRpb25EYXRhLnRheF9hbW91bnQsXG4gICAgICBjYWxjdWxhdGlvbkRhdGEuZGlzY291bnRfYW1vdW50LFxuICAgICAgY2FsY3VsYXRpb25EYXRhLmNhbGN1bGF0aW9uX21ldGhvZCxcbiAgICAgIGNhbGN1bGF0aW9uRGF0YS5jYWxjdWxhdGlvbl9kZXRhaWxzXG4gICAgXVxuICApO1xuICBcbiAgLy8gU1FMaXRlJ2RhIGxhc3RJRCB5ZXJpbmUgbGFzdEluc2VydFJvd2lkIGt1bGxhblxuICBjb25zdCBuZXdDYWxjdWxhdGlvbiA9IGF3YWl0IGRiR2V0KCdTRUxFQ1QgKiBGUk9NIHByaWNlX2NhbGN1bGF0aW9ucyBXSEVSRSBpZCA9IGxhc3RfaW5zZXJ0X3Jvd2lkKCknKTtcbiAgcmV0dXJuIG5ld0NhbGN1bGF0aW9uO1xufVxuXG4vLyBFbiBzb24gaGVzYXBsYW1hIHNvbnVjdW51IGFsXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TGF0ZXN0UHJpY2VDYWxjdWxhdGlvbihzaGlwcGluZ0lkOiBudW1iZXIpOiBQcm9taXNlPFByaWNlQ2FsY3VsYXRpb24gfCBudWxsPiB7XG4gIHJldHVybiBhd2FpdCBkYkdldChcbiAgICAnU0VMRUNUICogRlJPTSBwcmljZV9jYWxjdWxhdGlvbnMgV0hFUkUgc2hpcHBpbmdfaWQgPSA/IE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBMSU1JVCAxJyxcbiAgICBbc2hpcHBpbmdJZF1cbiAgKTtcbn1cblxuLy8gVGVkYXJpa8OnaSBzYXTEscWfIGZhdHVyYWxhcsSxIGnFn2xlbWxlcmlcbmV4cG9ydCBpbnRlcmZhY2UgUHVyY2hhc2VJbnZvaWNlIHtcbiAgaWQ6IG51bWJlcjtcbiAgaW52b2ljZV9udW1iZXI6IHN0cmluZztcbiAgc3VwcGxpZXJfaWQ6IG51bWJlcjtcbiAgaW52b2ljZV9kYXRlOiBzdHJpbmc7XG4gIHRvdGFsX2Ftb3VudDogbnVtYmVyO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHVyY2hhc2VJbnZvaWNlSXRlbSB7XG4gIGlkOiBudW1iZXI7XG4gIGludm9pY2VfaWQ6IG51bWJlcjtcbiAgcHJvZHVjdF9jb2RlOiBzdHJpbmc7XG4gIHF1YW50aXR5OiBudW1iZXI7XG4gIHVuaXRfcHJpY2U6IG51bWJlcjtcbiAgdG90YWxfcHJpY2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFB1cmNoYXNlSW52b2ljZXNCeVN1cHBsaWVyKFxuICBzdXBwbGllcklkOiBudW1iZXIsXG4gIHByb2R1Y3RDb2RlPzogc3RyaW5nXG4pOiBQcm9taXNlPFB1cmNoYXNlSW52b2ljZVtdPiB7XG4gIGxldCBxdWVyeSA9IGBcbiAgICBTRUxFQ1QgRElTVElOQ1QgcGkuKlxuICAgIEZST00gcHVyY2hhc2VfaW52b2ljZXMgcGlcbiAgICBXSEVSRSBwaS5zdXBwbGllcl9pZCA9ID9cbiAgYDtcbiAgY29uc3QgcGFyYW1zOiBhbnlbXSA9IFtzdXBwbGllcklkXTtcbiAgXG4gIGlmIChwcm9kdWN0Q29kZSkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQcm9kdWN0Q29kZSA9IG5vcm1hbGl6ZVByb2R1Y3RDb2RlKHByb2R1Y3RDb2RlKTtcbiAgICBcbiAgICAvLyDDlm5jZSB0YW0gZcWfbGXFn21lIGRlbmVcbiAgICBsZXQgc2VhcmNoUXVlcnkgPSBgXG4gICAgICBTRUxFQ1QgRElTVElOQ1QgcGkuKlxuICAgICAgRlJPTSBwdXJjaGFzZV9pbnZvaWNlcyBwaVxuICAgICAgV0hFUkUgcGkuc3VwcGxpZXJfaWQgPSA/XG4gICAgICBBTkQgRVhJU1RTIChcbiAgICAgICAgU0VMRUNUIDEgRlJPTSBwdXJjaGFzZV9pbnZvaWNlX2l0ZW1zIHBpaVxuICAgICAgICBXSEVSRSBwaWkuaW52b2ljZV9pZCA9IHBpLmlkIFxuICAgICAgICBBTkQgVVBQRVIoUkVQTEFDRShSRVBMQUNFKHBpaS5wcm9kdWN0X2NvZGUsICcgJywgJy0nKSwgJyAgJywgJy0nKSkgPSA/XG4gICAgICApXG4gICAgICBPUkRFUiBCWSBwaS5pbnZvaWNlX2RhdGUgREVTQ1xuICAgIGA7XG4gICAgbGV0IHNlYXJjaFBhcmFtcyA9IFtzdXBwbGllcklkLCBub3JtYWxpemVkUHJvZHVjdENvZGVdO1xuICAgIFxuICAgIGxldCByZXN1bHQgPSBhd2FpdCBkYkFsbChzZWFyY2hRdWVyeSwgc2VhcmNoUGFyYW1zKTtcbiAgICBcbiAgICAvLyBFxJ9lciBzb251w6cgYnVsdW5hbWF6c2EsIHNhZGVjZSBzYXnEsXNhbCBrxLFzbcSxIChyZW5rIGtvZHVudSDDp8Sxa2FyYXJhaykgZGVuZVxuICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zdCBudW1lcmljUGFydCA9IG5vcm1hbGl6ZWRQcm9kdWN0Q29kZS5zcGxpdCgnLScpWzBdO1xuICAgICAgaWYgKG51bWVyaWNQYXJ0ICYmIG51bWVyaWNQYXJ0ICE9PSBub3JtYWxpemVkUHJvZHVjdENvZGUpIHtcbiAgICAgICAgc2VhcmNoUXVlcnkgPSBgXG4gICAgICAgICAgU0VMRUNUIERJU1RJTkNUIHBpLipcbiAgICAgICAgICBGUk9NIHB1cmNoYXNlX2ludm9pY2VzIHBpXG4gICAgICAgICAgV0hFUkUgcGkuc3VwcGxpZXJfaWQgPSA/XG4gICAgICAgICAgQU5EIEVYSVNUUyAoXG4gICAgICAgICAgICBTRUxFQ1QgMSBGUk9NIHB1cmNoYXNlX2ludm9pY2VfaXRlbXMgcGlpXG4gICAgICAgICAgICBXSEVSRSBwaWkuaW52b2ljZV9pZCA9IHBpLmlkIFxuICAgICAgICAgICAgQU5EIFVQUEVSKFJFUExBQ0UoUkVQTEFDRShwaWkucHJvZHVjdF9jb2RlLCAnICcsICctJyksICcgICcsICctJykpIExJS0UgP1xuICAgICAgICAgIClcbiAgICAgICAgICBPUkRFUiBCWSBwaS5pbnZvaWNlX2RhdGUgREVTQ1xuICAgICAgICBgO1xuICAgICAgICBzZWFyY2hQYXJhbXMgPSBbc3VwcGxpZXJJZCwgYCR7bnVtZXJpY1BhcnR9LSVgXTtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgZGJBbGwoc2VhcmNoUXVlcnksIHNlYXJjaFBhcmFtcyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgXG4gIHF1ZXJ5ICs9ICcgT1JERVIgQlkgcGkuaW52b2ljZV9kYXRlIERFU0MnO1xuICBcbiAgcmV0dXJuIGF3YWl0IGRiQWxsKHF1ZXJ5LCBwYXJhbXMpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHVyY2hhc2VJbnZvaWNlSXRlbXMoaW52b2ljZUlkOiBudW1iZXIpOiBQcm9taXNlPFB1cmNoYXNlSW52b2ljZUl0ZW1bXT4ge1xuICByZXR1cm4gYXdhaXQgZGJBbGwoXG4gICAgJ1NFTEVDVCAqIEZST00gcHVyY2hhc2VfaW52b2ljZV9pdGVtcyBXSEVSRSBpbnZvaWNlX2lkID0gPycsXG4gICAgW2ludm9pY2VJZF1cbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFB1cmNoYXNlSW52b2ljZVdpdGhJdGVtcyhpbnZvaWNlSWQ6IG51bWJlcik6IFByb21pc2U8e1xuICBpbnZvaWNlOiBQdXJjaGFzZUludm9pY2U7XG4gIGl0ZW1zOiBQdXJjaGFzZUludm9pY2VJdGVtW107XG59IHwgbnVsbD4ge1xuICBjb25zdCBpbnZvaWNlID0gYXdhaXQgZGJHZXQoXG4gICAgJ1NFTEVDVCAqIEZST00gcHVyY2hhc2VfaW52b2ljZXMgV0hFUkUgaWQgPSA/JyxcbiAgICBbaW52b2ljZUlkXVxuICApIGFzIFB1cmNoYXNlSW52b2ljZSB8IG51bGw7XG4gIFxuICBpZiAoIWludm9pY2UpIHJldHVybiBudWxsO1xuICBcbiAgY29uc3QgaXRlbXMgPSBhd2FpdCBnZXRQdXJjaGFzZUludm9pY2VJdGVtcyhpbnZvaWNlSWQpO1xuICBcbiAgcmV0dXJuIHsgaW52b2ljZSwgaXRlbXMgfTtcbn1cblxuLy8gTElGTyBoZXNhcGxhbWE6IEJlbGlybGkgYmlyIMO8csO8biBpw6dpbiB0ZWRhcmlrw6dpbmluIGZhdHVyYWxhcsSxbmRhbiBMSUZPIG1hbnTEscSfxLF5bGEgYmlyaW0gZml5YXRsYXLEsSBoZXNhcGxhXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TElGT1ByaWNlcyhcbiAgc3VwcGxpZXJJZDogbnVtYmVyLFxuICBwcm9kdWN0Q29kZTogc3RyaW5nLFxuICBxdWFudGl0eTogbnVtYmVyXG4pOiBQcm9taXNlPEFycmF5PHtcbiAgaW52b2ljZUlkOiBudW1iZXI7XG4gIGludm9pY2VOdW1iZXI6IHN0cmluZztcbiAgaW52b2ljZURhdGU6IHN0cmluZztcbiAgcXVhbnRpdHk6IG51bWJlcjtcbiAgdW5pdFByaWNlOiBudW1iZXI7XG4gIHRvdGFsOiBudW1iZXI7XG59Pj4ge1xuICBjb25zdCBub3JtYWxpemVkUHJvZHVjdENvZGUgPSBub3JtYWxpemVQcm9kdWN0Q29kZShwcm9kdWN0Q29kZSk7XG4gIFxuICAvLyDDlm5jZSB0YW0gZcWfbGXFn21lIGRlbmVcbiAgbGV0IGludm9pY2VzID0gYXdhaXQgZGJBbGwoYFxuICAgIFNFTEVDVCBwaS5pZCwgcGkuaW52b2ljZV9udW1iZXIsIHBpLmludm9pY2VfZGF0ZSwgcGlpLnF1YW50aXR5LCBwaWkudW5pdF9wcmljZVxuICAgIEZST00gcHVyY2hhc2VfaW52b2ljZXMgcGlcbiAgICBKT0lOIHB1cmNoYXNlX2ludm9pY2VfaXRlbXMgcGlpIE9OIHBpaS5pbnZvaWNlX2lkID0gcGkuaWRcbiAgICBXSEVSRSBwaS5zdXBwbGllcl9pZCA9ID8gQU5EIFVQUEVSKFJFUExBQ0UoUkVQTEFDRShwaWkucHJvZHVjdF9jb2RlLCAnICcsICctJyksICcgICcsICctJykpID0gP1xuICAgIE9SREVSIEJZIHBpLmludm9pY2VfZGF0ZSBERVNDLCBwaS5pZCBERVNDXG4gIGAsIFtzdXBwbGllcklkLCBub3JtYWxpemVkUHJvZHVjdENvZGVdKTtcbiAgXG4gIC8vIEXEn2VyIGJ1bHVuYW1henNhLCBzYWRlY2Ugc2F5xLFzYWwga8Sxc23EsSAocmVuayBrb2R1bnUgw6fEsWthcmFyYWspIGRlbmVcbiAgaWYgKGludm9pY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnN0IG51bWVyaWNQYXJ0ID0gbm9ybWFsaXplZFByb2R1Y3RDb2RlLnNwbGl0KCctJylbMF07XG4gICAgaWYgKG51bWVyaWNQYXJ0ICYmIG51bWVyaWNQYXJ0ICE9PSBub3JtYWxpemVkUHJvZHVjdENvZGUpIHtcbiAgICAgIGludm9pY2VzID0gYXdhaXQgZGJBbGwoYFxuICAgICAgICBTRUxFQ1QgcGkuaWQsIHBpLmludm9pY2VfbnVtYmVyLCBwaS5pbnZvaWNlX2RhdGUsIHBpaS5xdWFudGl0eSwgcGlpLnVuaXRfcHJpY2VcbiAgICAgICAgRlJPTSBwdXJjaGFzZV9pbnZvaWNlcyBwaVxuICAgICAgICBKT0lOIHB1cmNoYXNlX2ludm9pY2VfaXRlbXMgcGlpIE9OIHBpaS5pbnZvaWNlX2lkID0gcGkuaWRcbiAgICAgICAgV0hFUkUgcGkuc3VwcGxpZXJfaWQgPSA/IEFORCBVUFBFUihSRVBMQUNFKFJFUExBQ0UocGlpLnByb2R1Y3RfY29kZSwgJyAnLCAnLScpLCAnICAnLCAnLScpKSBMSUtFID9cbiAgICAgICAgT1JERVIgQlkgcGkuaW52b2ljZV9kYXRlIERFU0MsIHBpLmlkIERFU0NcbiAgICAgIGAsIFtzdXBwbGllcklkLCBgJHtudW1lcmljUGFydH0tJWBdKTtcbiAgICB9XG4gIH1cbiAgXG4gIGNvbnN0IHJlc3VsdDogQXJyYXk8e1xuICAgIGludm9pY2VJZDogbnVtYmVyO1xuICAgIGludm9pY2VOdW1iZXI6IHN0cmluZztcbiAgICBpbnZvaWNlRGF0ZTogc3RyaW5nO1xuICAgIHF1YW50aXR5OiBudW1iZXI7XG4gICAgdW5pdFByaWNlOiBudW1iZXI7XG4gICAgdG90YWw6IG51bWJlcjtcbiAgfT4gPSBbXTtcbiAgXG4gIGxldCByZW1haW5pbmdRdWFudGl0eSA9IHF1YW50aXR5O1xuICBcbiAgZm9yIChjb25zdCBpbnZvaWNlIG9mIGludm9pY2VzKSB7XG4gICAgaWYgKHJlbWFpbmluZ1F1YW50aXR5IDw9IDApIGJyZWFrO1xuICAgIFxuICAgIGNvbnN0IGF2YWlsYWJsZVF1YW50aXR5ID0gaW52b2ljZS5xdWFudGl0eTtcbiAgICBjb25zdCB0YWtlUXVhbnRpdHkgPSBNYXRoLm1pbihyZW1haW5pbmdRdWFudGl0eSwgYXZhaWxhYmxlUXVhbnRpdHkpO1xuICAgIFxuICAgIGlmICh0YWtlUXVhbnRpdHkgPiAwKSB7XG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIGludm9pY2VJZDogaW52b2ljZS5pZCxcbiAgICAgICAgaW52b2ljZU51bWJlcjogaW52b2ljZS5pbnZvaWNlX251bWJlcixcbiAgICAgICAgaW52b2ljZURhdGU6IGludm9pY2UuaW52b2ljZV9kYXRlLFxuICAgICAgICBxdWFudGl0eTogdGFrZVF1YW50aXR5LFxuICAgICAgICB1bml0UHJpY2U6IGludm9pY2UudW5pdF9wcmljZSxcbiAgICAgICAgdG90YWw6IHRha2VRdWFudGl0eSAqIGludm9pY2UudW5pdF9wcmljZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJlbWFpbmluZ1F1YW50aXR5IC09IHRha2VRdWFudGl0eTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IGRiLCBkYlJ1biwgZGJHZXQsIGRiQWxsIH07XG4iXSwibmFtZXMiOlsic3FsaXRlMyIsInByb21pc2lmeSIsInBhdGgiLCJub3JtYWxpemVQcm9kdWN0Q29kZSIsIm1hcFVJU3RhdHVzVG9EYiIsImRiUGF0aCIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiZGIiLCJEYXRhYmFzZSIsImRiUnVuIiwicnVuIiwiYmluZCIsImRiR2V0IiwiZ2V0IiwiZGJBbGwiLCJhbGwiLCJpbml0aWFsaXplRGF0YWJhc2UiLCJmcyIsInJlcXVpcmUiLCJzY2hlbWFQYXRoIiwic2VlZFBhdGgiLCJzY2hlbWEiLCJyZWFkRmlsZVN5bmMiLCJzZWVkIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiY2xvc2VEYXRhYmFzZSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiY2xvc2UiLCJlcnIiLCJnZXRTdXBwbGllcnMiLCJjb21wYW55SWQiLCJ1bmRlZmluZWQiLCJpZCIsInBhcnNlSW50IiwiaXNOYU4iLCJnZXRTdXBwbGllckJ5SWQiLCJnZXRTaGlwcGluZ0RvY3VtZW50cyIsImZpbHRlcnMiLCJzaGlwcGluZ051bWJlciIsInN0YXR1cyIsInN1cHBsaWVyQ29kZSIsInBhZ2UiLCJsaW1pdCIsIndoZXJlQ2xhdXNlIiwicGFyYW1zIiwicHVzaCIsImRiU3RhdHVzIiwidG90YWxSZXN1bHQiLCJ0b3RhbCIsImNvdW50Iiwib2Zmc2V0IiwiZGF0YSIsImdldFNoaXBwaW5nRG9jdW1lbnRCeUlkIiwiZ2V0U2hpcHBpbmdJdGVtcyIsInNoaXBwaW5nSWQiLCJ1cGRhdGVTaGlwcGluZ0RvY3VtZW50U3RhdHVzIiwic2hpcHBpbmdfaWQiLCJ0b3RhbF9hbW91bnQiLCJnZXRJbnZvaWNlcyIsInNlYXJjaCIsImNyZWF0ZUludm9pY2UiLCJpbnZvaWNlRGF0YSIsImNvdW50UmVzdWx0IiwiaW52b2ljZU51bWJlciIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJyZXN1bHQiLCJpbnZvaWNlX3R5cGUiLCJiYXNlX2Ftb3VudCIsInRheF9hbW91bnQiLCJkaXNjb3VudF9hbW91bnQiLCJjcmVhdGVkX2RhdGUiLCJkdWVfZGF0ZSIsIm5ld0ludm9pY2UiLCJpbnZvaWNlZFN0YXR1cyIsInNhdmVQcmljZUNhbGN1bGF0aW9uIiwiY2FsY3VsYXRpb25EYXRhIiwiY2FsY3VsYXRlZF9wcmljZSIsImNhbGN1bGF0aW9uX21ldGhvZCIsImNhbGN1bGF0aW9uX2RldGFpbHMiLCJuZXdDYWxjdWxhdGlvbiIsImdldExhdGVzdFByaWNlQ2FsY3VsYXRpb24iLCJnZXRQdXJjaGFzZUludm9pY2VzQnlTdXBwbGllciIsInN1cHBsaWVySWQiLCJwcm9kdWN0Q29kZSIsInF1ZXJ5Iiwibm9ybWFsaXplZFByb2R1Y3RDb2RlIiwic2VhcmNoUXVlcnkiLCJzZWFyY2hQYXJhbXMiLCJsZW5ndGgiLCJudW1lcmljUGFydCIsInNwbGl0IiwiZ2V0UHVyY2hhc2VJbnZvaWNlSXRlbXMiLCJpbnZvaWNlSWQiLCJnZXRQdXJjaGFzZUludm9pY2VXaXRoSXRlbXMiLCJpbnZvaWNlIiwiaXRlbXMiLCJnZXRMSUZPUHJpY2VzIiwicXVhbnRpdHkiLCJpbnZvaWNlcyIsInJlbWFpbmluZ1F1YW50aXR5IiwiYXZhaWxhYmxlUXVhbnRpdHkiLCJ0YWtlUXVhbnRpdHkiLCJNYXRoIiwibWluIiwiaW52b2ljZV9udW1iZXIiLCJpbnZvaWNlRGF0ZSIsImludm9pY2VfZGF0ZSIsInVuaXRQcmljZSIsInVuaXRfcHJpY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/utils.ts":
/*!**************************!*\
  !*** ./app/lib/utils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DISCOUNT_RATE: () => (/* binding */ DISCOUNT_RATE),\n/* harmony export */   PROFIT_MARGIN: () => (/* binding */ PROFIT_MARGIN),\n/* harmony export */   TAX_RATE: () => (/* binding */ TAX_RATE),\n/* harmony export */   addTaxToPrice: () => (/* binding */ addTaxToPrice),\n/* harmony export */   applyProfitMargin: () => (/* binding */ applyProfitMargin),\n/* harmony export */   calculateDiscount: () => (/* binding */ calculateDiscount),\n/* harmony export */   calculateTax: () => (/* binding */ calculateTax),\n/* harmony export */   calculateTotalWithTax: () => (/* binding */ calculateTotalWithTax),\n/* harmony export */   debounce: () => (/* binding */ debounce),\n/* harmony export */   formatCurrency: () => (/* binding */ formatCurrency),\n/* harmony export */   formatDate: () => (/* binding */ formatDate),\n/* harmony export */   getStatusColor: () => (/* binding */ getStatusColor),\n/* harmony export */   getStatusText: () => (/* binding */ getStatusText),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   mapDbStatusToUI: () => (/* binding */ mapDbStatusToUI),\n/* harmony export */   mapUIStatusToDb: () => (/* binding */ mapUIStatusToDb),\n/* harmony export */   normalizeProductCode: () => (/* binding */ normalizeProductCode),\n/* harmony export */   parseProductCode: () => (/* binding */ parseProductCode),\n/* harmony export */   removeTaxFromPrice: () => (/* binding */ removeTaxFromPrice)\n/* harmony export */ });\n// Tedarikçi İrsaliye Sistemi - Utility Fonksiyonları\n// Sabitler\nconst TAX_RATE = 0.18;\nconst PROFIT_MARGIN = 0.10;\nconst DISCOUNT_RATE = 0.02;\n// Ürün kodu normalizasyonu\nfunction normalizeProductCode(code) {\n    if (!code) return \"\";\n    return code.trim().replace(/\\s+/g, \"-\").toUpperCase();\n}\n// Ürün kodunu parse et\nfunction parseProductCode(productCode) {\n    if (!productCode) {\n        return {\n            code: \"-\",\n            color: \"-\",\n            size: \"-\"\n        };\n    }\n    const parts = productCode.trim().split(/[\\s-]+/);\n    if (parts.length >= 2) {\n        return {\n            code: parts[0],\n            color: parts[1] || \"-\",\n            size: parts[2] || \"-\"\n        };\n    } else if (parts.length === 1) {\n        return {\n            code: parts[0],\n            color: \"-\",\n            size: \"-\"\n        };\n    }\n    return {\n        code: productCode,\n        color: \"-\",\n        size: \"-\"\n    };\n}\n// Database status'ünü UI status'üne çevir\nfunction mapDbStatusToUI(status) {\n    switch(status){\n        case \"approved\":\n            return \"calculated\";\n        case \"rejected\":\n            return \"invoiced\";\n        case \"pending\":\n        default:\n            return \"pending\";\n    }\n}\n// UI status'ünü database status'üne çevir\nfunction mapUIStatusToDb(status) {\n    switch(status){\n        case \"calculated\":\n            return \"approved\";\n        case \"invoiced\":\n            return \"rejected\";\n        case \"pending\":\n        default:\n            return \"pending\";\n    }\n}\n// Status renklendirme\nfunction getStatusColor(status) {\n    switch(status){\n        case \"invoiced\":\n            return \"bg-blue-100 text-blue-800\";\n        case \"calculated\":\n            return \"bg-green-100 text-green-800\";\n        case \"pending\":\n        default:\n            return \"bg-yellow-100 text-yellow-800\";\n    }\n}\n// Status metni\nfunction getStatusText(status) {\n    switch(status){\n        case \"invoiced\":\n            return \"Faturalandırıldı\";\n        case \"calculated\":\n            return \"Hesaplandı\";\n        case \"pending\":\n        default:\n            return \"Beklemede\";\n    }\n}\n// Para formatı\nfunction formatCurrency(amount) {\n    return `₺${amount.toLocaleString(\"tr-TR\", {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 2\n    })}`;\n}\n// Tarih formatı\nfunction formatDate(date) {\n    const dateObj = typeof date === \"string\" ? new Date(date) : date;\n    return dateObj.toLocaleDateString(\"tr-TR\");\n}\n// KDV hesaplama\nfunction calculateTax(baseAmount) {\n    return baseAmount * TAX_RATE;\n}\n// İndirim hesaplama\nfunction calculateDiscount(baseAmount, rate = DISCOUNT_RATE) {\n    return baseAmount * rate;\n}\n// Kar marjı hesaplama\nfunction applyProfitMargin(amount) {\n    return amount * (1 + PROFIT_MARGIN);\n}\n// KDV dahil fiyat hesaplama\nfunction calculateTotalWithTax(baseAmount, taxAmount, discountAmount = 0) {\n    return baseAmount + taxAmount - discountAmount;\n}\n// KDV hariç fiyattan KDV dahil fiyata çevirme\nfunction addTaxToPrice(priceWithoutTax) {\n    return priceWithoutTax * (1 + TAX_RATE);\n}\n// KDV dahil fiyattan KDV hariç fiyata çevirme\nfunction removeTaxFromPrice(priceWithTax) {\n    return priceWithTax / (1 + TAX_RATE);\n}\n// Debounce utility\nfunction debounce(func, wait) {\n    let timeout = null;\n    return function executedFunction(...args) {\n        const later = ()=>{\n            timeout = null;\n            func(...args);\n        };\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n        timeout = setTimeout(later, wait);\n    };\n}\n// Logger (environment'a göre log'la)\nconst logger = {\n    log: (...args)=>{\n        if (true) {\n            console.log(...args);\n        }\n    },\n    warn: (...args)=>{\n        if (true) {\n            console.warn(...args);\n        }\n    },\n    error: (...args)=>{\n        console.error(...args);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUFBWUM7QUFDbEM7QUFFQSw4Q0FBOEM7QUFDdkMsU0FBU0MsY0FBY0MsZUFBdUI7SUFDbkQsT0FBT0Esa0JBQW1CLEtBQUl2QyxRQUFPO0FBQ3ZDO0FBRUEsOENBQThDO0FBQ3ZDLFNBQVN3QyxtQkFBbUJDLFlBQW9CO0lBQ3JELE9BQU9BLGVBQWdCLEtBQUl6QyxRQUFPO0FBQ3BDO0FBRUEsbUJBQW1CO0FBQ1osU0FBUzBDLFNBQ2RDLElBQU8sRUFDUEMsSUFBWTtJQUVaLElBQUlDLFVBQWlDO0lBRXJDLE9BQU8sU0FBU0MsaUJBQWlCLEdBQUdDLElBQW1CO1FBQ3JELE1BQU1DLFFBQVE7WUFDWkgsVUFBVTtZQUNWRixRQUFRSTtRQUNWO1FBRUEsSUFBSUYsU0FBUztZQUNYSSxhQUFhSjtRQUNmO1FBQ0FBLFVBQVVLLFdBQVdGLE9BQU9KO0lBQzlCO0FBQ0Y7QUFFQSxxQ0FBcUM7QUFDOUIsTUFBTU8sU0FBUztJQUNwQkMsS0FBSyxDQUFDLEdBQUdMO1FBQ1AsSUFBSU0sSUFBeUIsRUFBZTtZQUMxQ0MsUUFBUUYsR0FBRyxJQUFJTDtRQUNqQjtJQUNGO0lBQ0FRLE1BQU0sQ0FBQyxHQUFHUjtRQUNSLElBQUlNLElBQXlCLEVBQWU7WUFDMUNDLFFBQVFDLElBQUksSUFBSVI7UUFDbEI7SUFDRjtJQUNBUyxPQUFPLENBQUMsR0FBR1Q7UUFDVE8sUUFBUUUsS0FBSyxJQUFJVDtJQUNuQjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZWRhcmlrY2ktaXJzYWxpeWUvLi9hcHAvbGliL3V0aWxzLnRzP2NkN2MiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGVkYXJpa8OnaSDEsHJzYWxpeWUgU2lzdGVtaSAtIFV0aWxpdHkgRm9ua3NpeW9ubGFyxLFcclxuXHJcbmltcG9ydCB0eXBlIHsgUGFyc2VkUHJvZHVjdENvZGUsIFVJU3RhdHVzLCBEQlN0YXR1cyB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuLy8gU2FiaXRsZXJcclxuZXhwb3J0IGNvbnN0IFRBWF9SQVRFID0gMC4xODtcclxuZXhwb3J0IGNvbnN0IFBST0ZJVF9NQVJHSU4gPSAwLjEwO1xyXG5leHBvcnQgY29uc3QgRElTQ09VTlRfUkFURSA9IDAuMDI7XHJcblxyXG4vLyDDnHLDvG4ga29kdSBub3JtYWxpemFzeW9udVxyXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplUHJvZHVjdENvZGUoY29kZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICBpZiAoIWNvZGUpIHJldHVybiAnJztcclxuICByZXR1cm4gY29kZS50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnLScpLnRvVXBwZXJDYXNlKCk7XHJcbn1cclxuXHJcbi8vIMOccsO8biBrb2R1bnUgcGFyc2UgZXRcclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvZHVjdENvZGUocHJvZHVjdENvZGU6IHN0cmluZyk6IFBhcnNlZFByb2R1Y3RDb2RlIHtcclxuICBpZiAoIXByb2R1Y3RDb2RlKSB7XHJcbiAgICByZXR1cm4geyBjb2RlOiAnLScsIGNvbG9yOiAnLScsIHNpemU6ICctJyB9O1xyXG4gIH1cclxuICBcclxuICBjb25zdCBwYXJ0cyA9IHByb2R1Y3RDb2RlLnRyaW0oKS5zcGxpdCgvW1xccy1dKy8pO1xyXG4gIFxyXG4gIGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY29kZTogcGFydHNbMF0sXHJcbiAgICAgIGNvbG9yOiBwYXJ0c1sxXSB8fCAnLScsXHJcbiAgICAgIHNpemU6IHBhcnRzWzJdIHx8ICctJ1xyXG4gICAgfTtcclxuICB9IGVsc2UgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY29kZTogcGFydHNbMF0sXHJcbiAgICAgIGNvbG9yOiAnLScsXHJcbiAgICAgIHNpemU6ICctJ1xyXG4gICAgfTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIGNvZGU6IHByb2R1Y3RDb2RlLFxyXG4gICAgY29sb3I6ICctJyxcclxuICAgIHNpemU6ICctJ1xyXG4gIH07XHJcbn1cclxuXHJcbi8vIERhdGFiYXNlIHN0YXR1cyfDvG7DvCBVSSBzdGF0dXMnw7xuZSDDp2V2aXJcclxuZXhwb3J0IGZ1bmN0aW9uIG1hcERiU3RhdHVzVG9VSShzdGF0dXM6IHN0cmluZyk6IFVJU3RhdHVzIHtcclxuICBzd2l0Y2ggKHN0YXR1cykge1xyXG4gICAgY2FzZSAnYXBwcm92ZWQnOlxyXG4gICAgICByZXR1cm4gJ2NhbGN1bGF0ZWQnO1xyXG4gICAgY2FzZSAncmVqZWN0ZWQnOlxyXG4gICAgICByZXR1cm4gJ2ludm9pY2VkJztcclxuICAgIGNhc2UgJ3BlbmRpbmcnOlxyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuICdwZW5kaW5nJztcclxuICB9XHJcbn1cclxuXHJcbi8vIFVJIHN0YXR1cyfDvG7DvCBkYXRhYmFzZSBzdGF0dXMnw7xuZSDDp2V2aXJcclxuZXhwb3J0IGZ1bmN0aW9uIG1hcFVJU3RhdHVzVG9EYihzdGF0dXM6IFVJU3RhdHVzKTogREJTdGF0dXMge1xyXG4gIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICBjYXNlICdjYWxjdWxhdGVkJzpcclxuICAgICAgcmV0dXJuICdhcHByb3ZlZCc7XHJcbiAgICBjYXNlICdpbnZvaWNlZCc6XHJcbiAgICAgIHJldHVybiAncmVqZWN0ZWQnO1xyXG4gICAgY2FzZSAncGVuZGluZyc6XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICByZXR1cm4gJ3BlbmRpbmcnO1xyXG4gIH1cclxufVxyXG5cclxuLy8gU3RhdHVzIHJlbmtsZW5kaXJtZVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhdHVzQ29sb3Ioc3RhdHVzOiBVSVN0YXR1cyk6IHN0cmluZyB7XHJcbiAgc3dpdGNoIChzdGF0dXMpIHtcclxuICAgIGNhc2UgJ2ludm9pY2VkJzpcclxuICAgICAgcmV0dXJuICdiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwJztcclxuICAgIGNhc2UgJ2NhbGN1bGF0ZWQnOlxyXG4gICAgICByZXR1cm4gJ2JnLWdyZWVuLTEwMCB0ZXh0LWdyZWVuLTgwMCc7XHJcbiAgICBjYXNlICdwZW5kaW5nJzpcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiAnYmcteWVsbG93LTEwMCB0ZXh0LXllbGxvdy04MDAnO1xyXG4gIH1cclxufVxyXG5cclxuLy8gU3RhdHVzIG1ldG5pXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGF0dXNUZXh0KHN0YXR1czogVUlTdGF0dXMpOiBzdHJpbmcge1xyXG4gIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICBjYXNlICdpbnZvaWNlZCc6XHJcbiAgICAgIHJldHVybiAnRmF0dXJhbGFuZMSxcsSxbGTEsSc7XHJcbiAgICBjYXNlICdjYWxjdWxhdGVkJzpcclxuICAgICAgcmV0dXJuICdIZXNhcGxhbmTEsSc7XHJcbiAgICBjYXNlICdwZW5kaW5nJzpcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiAnQmVrbGVtZWRlJztcclxuICB9XHJcbn1cclxuXHJcbi8vIFBhcmEgZm9ybWF0xLFcclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEN1cnJlbmN5KGFtb3VudDogbnVtYmVyKTogc3RyaW5nIHtcclxuICByZXR1cm4gYOKCuiR7YW1vdW50LnRvTG9jYWxlU3RyaW5nKCd0ci1UUicsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyLCBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSl9YDtcclxufVxyXG5cclxuLy8gVGFyaWggZm9ybWF0xLFcclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZTogc3RyaW5nIHwgRGF0ZSk6IHN0cmluZyB7XHJcbiAgY29uc3QgZGF0ZU9iaiA9IHR5cGVvZiBkYXRlID09PSAnc3RyaW5nJyA/IG5ldyBEYXRlKGRhdGUpIDogZGF0ZTtcclxuICByZXR1cm4gZGF0ZU9iai50b0xvY2FsZURhdGVTdHJpbmcoJ3RyLVRSJyk7XHJcbn1cclxuXHJcbi8vIEtEViBoZXNhcGxhbWFcclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVRheChiYXNlQW1vdW50OiBudW1iZXIpOiBudW1iZXIge1xyXG4gIHJldHVybiBiYXNlQW1vdW50ICogVEFYX1JBVEU7XHJcbn1cclxuXHJcbi8vIMSwbmRpcmltIGhlc2FwbGFtYVxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlRGlzY291bnQoYmFzZUFtb3VudDogbnVtYmVyLCByYXRlOiBudW1iZXIgPSBESVNDT1VOVF9SQVRFKTogbnVtYmVyIHtcclxuICByZXR1cm4gYmFzZUFtb3VudCAqIHJhdGU7XHJcbn1cclxuXHJcbi8vIEthciBtYXJqxLEgaGVzYXBsYW1hXHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBseVByb2ZpdE1hcmdpbihhbW91bnQ6IG51bWJlcik6IG51bWJlciB7XHJcbiAgcmV0dXJuIGFtb3VudCAqICgxICsgUFJPRklUX01BUkdJTik7XHJcbn1cclxuXHJcbi8vIEtEViBkYWhpbCBmaXlhdCBoZXNhcGxhbWFcclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVRvdGFsV2l0aFRheChiYXNlQW1vdW50OiBudW1iZXIsIHRheEFtb3VudDogbnVtYmVyLCBkaXNjb3VudEFtb3VudDogbnVtYmVyID0gMCk6IG51bWJlciB7XHJcbiAgcmV0dXJuIGJhc2VBbW91bnQgKyB0YXhBbW91bnQgLSBkaXNjb3VudEFtb3VudDtcclxufVxyXG5cclxuLy8gS0RWIGhhcmnDpyBmaXlhdHRhbiBLRFYgZGFoaWwgZml5YXRhIMOnZXZpcm1lXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRUYXhUb1ByaWNlKHByaWNlV2l0aG91dFRheDogbnVtYmVyKTogbnVtYmVyIHtcclxuICByZXR1cm4gcHJpY2VXaXRob3V0VGF4ICogKDEgKyBUQVhfUkFURSk7XHJcbn1cclxuXHJcbi8vIEtEViBkYWhpbCBmaXlhdHRhbiBLRFYgaGFyacOnIGZpeWF0YSDDp2V2aXJtZVxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVGF4RnJvbVByaWNlKHByaWNlV2l0aFRheDogbnVtYmVyKTogbnVtYmVyIHtcclxuICByZXR1cm4gcHJpY2VXaXRoVGF4IC8gKDEgKyBUQVhfUkFURSk7XHJcbn1cclxuXHJcbi8vIERlYm91bmNlIHV0aWxpdHlcclxuZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlPFQgZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IGFueT4oXHJcbiAgZnVuYzogVCxcclxuICB3YWl0OiBudW1iZXJcclxuKTogKC4uLmFyZ3M6IFBhcmFtZXRlcnM8VD4pID0+IHZvaWQge1xyXG4gIGxldCB0aW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xyXG4gIFxyXG4gIHJldHVybiBmdW5jdGlvbiBleGVjdXRlZEZ1bmN0aW9uKC4uLmFyZ3M6IFBhcmFtZXRlcnM8VD4pIHtcclxuICAgIGNvbnN0IGxhdGVyID0gKCkgPT4ge1xyXG4gICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgZnVuYyguLi5hcmdzKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIGlmICh0aW1lb3V0KSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgIH1cclxuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcclxuICB9O1xyXG59XHJcblxyXG4vLyBMb2dnZXIgKGVudmlyb25tZW50J2EgZ8O2cmUgbG9nJ2xhKVxyXG5leHBvcnQgY29uc3QgbG9nZ2VyID0ge1xyXG4gIGxvZzogKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgY29uc29sZS5sb2coLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgfSxcclxuICB3YXJuOiAoLi4uYXJnczogYW55W10pID0+IHtcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBjb25zb2xlLndhcm4oLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBlcnJvcjogKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKC4uLmFyZ3MpO1xyXG4gIH1cclxufTtcclxuIl0sIm5hbWVzIjpbIlRBWF9SQVRFIiwiUFJPRklUX01BUkdJTiIsIkRJU0NPVU5UX1JBVEUiLCJub3JtYWxpemVQcm9kdWN0Q29kZSIsImNvZGUiLCJ0cmltIiwicmVwbGFjZSIsInRvVXBwZXJDYXNlIiwicGFyc2VQcm9kdWN0Q29kZSIsInByb2R1Y3RDb2RlIiwiY29sb3IiLCJzaXplIiwicGFydHMiLCJzcGxpdCIsImxlbmd0aCIsIm1hcERiU3RhdHVzVG9VSSIsInN0YXR1cyIsIm1hcFVJU3RhdHVzVG9EYiIsImdldFN0YXR1c0NvbG9yIiwiZ2V0U3RhdHVzVGV4dCIsImZvcm1hdEN1cnJlbmN5IiwiYW1vdW50IiwidG9Mb2NhbGVTdHJpbmciLCJtaW5pbXVtRnJhY3Rpb25EaWdpdHMiLCJtYXhpbXVtRnJhY3Rpb25EaWdpdHMiLCJmb3JtYXREYXRlIiwiZGF0ZSIsImRhdGVPYmoiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiY2FsY3VsYXRlVGF4IiwiYmFzZUFtb3VudCIsImNhbGN1bGF0ZURpc2NvdW50IiwicmF0ZSIsImFwcGx5UHJvZml0TWFyZ2luIiwiY2FsY3VsYXRlVG90YWxXaXRoVGF4IiwidGF4QW1vdW50IiwiZGlzY291bnRBbW91bnQiLCJhZGRUYXhUb1ByaWNlIiwicHJpY2VXaXRob3V0VGF4IiwicmVtb3ZlVGF4RnJvbVByaWNlIiwicHJpY2VXaXRoVGF4IiwiZGVib3VuY2UiLCJmdW5jIiwid2FpdCIsInRpbWVvdXQiLCJleGVjdXRlZEZ1bmN0aW9uIiwiYXJncyIsImxhdGVyIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImxvZ2dlciIsImxvZyIsInByb2Nlc3MiLCJjb25zb2xlIiwid2FybiIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute&page=%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fshipping%2F%5Bid%5D%2Flatest-calculation%2Froute.ts&appDir=C%3A%5CUsers%5Ccaner.karadag%5CCursor_Projeler%5CTedarikci_Irsaliye%5Capp%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccaner.karadag%5CCursor_Projeler%5CTedarikci_Irsaliye%5Capp&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();